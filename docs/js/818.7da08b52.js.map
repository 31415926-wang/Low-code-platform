{"version":3,"file":"js/818.7da08b52.js","mappings":"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","sources":["webpack://question-star/./src/views/lego-works/worksOrTemplate/detailTemplate.vue?f9fb","webpack://question-star/./src/views/lego-works/worksOrTemplate/detailTemplate.vue","webpack://question-star/./src/views/lego-works/worksOrTemplate/detailTemplate.vue?5501"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, unref as _unref, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = (n: any) => (_pushScopeId(\"data-v-57d36872\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"detail-box\" }\nconst _hoisted_2 = { class: \"left\" }\nconst _hoisted_3 = [\"src\"]\nconst _hoisted_4 = { class: \"right\" }\nconst _hoisted_5 = { class: \"title\" }\nconst _hoisted_6 = { class: \"desc\" }\nconst _hoisted_7 = { class: \"desc\" }\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"该模版由\", -1))\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"创作\", -1))\nconst _hoisted_10 = { class: \"bt-group\" }\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"\" }, [\n  /*#__PURE__*/_createElementVNode(\"div\", { class: \"desc\" }, \"扫一扫，手机预览\")\n], -1))\nconst _hoisted_12 = { class: \"bt-group-footer\" }\n\nimport { ref, onMounted, createVNode } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { reqDetailWork, reqDeleteWork } from '@/api/works/workItem'\r\nimport { DetailTemplateOrWork } from '@/type/api/work'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons-vue'\r\nimport onDownload from '@/utils/downloadFile'\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'detailTemplate',\n  setup(__props) {\n\r\nconst $route = useRoute()\r\nconst $router = useRouter()\r\n\r\nconst spinning = ref<boolean>(false)\r\nconst detailData = ref<DetailTemplateOrWork>({} as DetailTemplateOrWork)\r\nconst deleteTemplateLoading = ref(false)\r\n\r\nonMounted(async () => {\r\n    spinning.value = true\r\n    // 加载模版详细\r\n    try {\r\n        const result = await reqDetailWork(Number($route.params.id))\r\n        if (result.errno !== 0) {\r\n            $router.go(-1)\r\n        } else {\r\n            detailData.value = result.data\r\n        }\r\n    } catch (error) {\r\n        $router.go(-1)\r\n    } finally {\r\n        spinning.value = false\r\n    }\r\n})\r\n\r\nconst editWork = (id: number) => {\r\n    $router.push('/edit-work/' + id)\r\n}\r\n\r\nconst showDeleteConfirm = (id: number) => {\r\n    Modal.confirm({\r\n        title: '确定删除该模版吗？',\r\n        icon: createVNode(ExclamationCircleOutlined),\r\n        okText: '确定',\r\n        okType: 'primary',\r\n        cancelText: '取消',\r\n        onOk() {\r\n            deleteWork(id)\r\n        },\r\n        onCancel() {\r\n            console.log('Cancel')\r\n        }\r\n    })\r\n}\r\n\r\nconst deleteWork = async (id: number) => {\r\n    deleteTemplateLoading.value = true\r\n    try {\r\n        await reqDeleteWork(id)\r\n        message.success('删除作品成功')\r\n        $router.go(-1)\r\n    } catch (error) {\r\n\r\n    } finally {\r\n        deleteTemplateLoading.value = false\r\n    }\r\n}\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_UserOutlined = _resolveComponent(\"UserOutlined\")!\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_DownloadOutlined = _resolveComponent(\"DownloadOutlined\")!\n  const _component_DeleteOutlined = _resolveComponent(\"DeleteOutlined\")!\n  const _component_RedoOutlined = _resolveComponent(\"RedoOutlined\")!\n  const _component_a_spin = _resolveComponent(\"a-spin\")!\n\n  return (_openBlock(), _createBlock(_component_a_spin, {\n    spinning: spinning.value,\n    size: \"large\",\n    tip: \"加载中\"\n  }, {\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          (detailData.value)\n            ? (_openBlock(), _createElementBlock(\"img\", {\n                key: 0,\n                src: detailData.value.coverImg,\n                alt: \"\"\n              }, null, 8, _hoisted_3))\n            : _createCommentVNode(\"\", true)\n        ]),\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"div\", _hoisted_5, _toDisplayString(detailData.value.title), 1),\n          _createElementVNode(\"div\", _hoisted_6, _toDisplayString(detailData.value.desc), 1),\n          _createElementVNode(\"div\", _hoisted_7, [\n            _createElementVNode(\"span\", null, [\n              _createVNode(_component_UserOutlined)\n            ]),\n            _hoisted_8,\n            _createElementVNode(\"span\", null, _toDisplayString(detailData.value.author), 1),\n            _hoisted_9\n          ]),\n          _createElementVNode(\"div\", _hoisted_10, [\n            _createVNode(_component_a_button, {\n              shape: \"round\",\n              size: \"middle\",\n              type: \"primary\",\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (editWork(detailData.value.id)))\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\"使用模版\")\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_a_button, {\n              shape: \"round\",\n              size: \"middle\",\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_unref(onDownload)(detailData.value.title, detailData.value.coverImg)))\n            }, {\n              icon: _withCtx(() => [\n                _createVNode(_component_DownloadOutlined)\n              ]),\n              default: _withCtx(() => [\n                _createTextVNode(\" 下载封面\")\n              ]),\n              _: 1\n            })\n          ]),\n          _hoisted_11,\n          _createElementVNode(\"div\", _hoisted_12, [\n            _createVNode(_component_a_button, {\n              shape: \"round\",\n              size: \"middle\",\n              danger: \"\",\n              loading: deleteTemplateLoading.value,\n              onClick: _cache[2] || (_cache[2] = ($event: any) => (showDeleteConfirm(detailData.value.id)))\n            }, {\n              icon: _withCtx(() => [\n                _createVNode(_component_DeleteOutlined)\n              ]),\n              default: _withCtx(() => [\n                _createTextVNode(\" 删除模版\")\n              ]),\n              _: 1\n            }, 8, [\"loading\"]),\n            _createVNode(_component_a_button, {\n              shape: \"round\",\n              size: \"middle\",\n              onClick: _cache[3] || (_cache[3] = ($event: any) => (_unref($router).go(-1)))\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_RedoOutlined),\n                _createTextVNode(\"返回列表 \")\n              ]),\n              _: 1\n            })\n          ])\n        ])\n      ])\n    ]),\n    _: 1\n  }, 8, [\"spinning\"]))\n}\n}\n\n})","<template>\r\n    <a-spin :spinning=\"spinning\" size=\"large\" tip=\"加载中\">\r\n        <div class=\"detail-box\">\r\n            <div class=\"left \">\r\n                <img :src=\"detailData.coverImg\" alt=\"\" v-if=\"detailData\">\r\n            </div>\r\n            <div class=\"right\">\r\n                <div class=\"title\">{{ detailData.title }}</div>\r\n                <div class=\"desc\">{{ detailData.desc }}</div>\r\n                <div class=\"desc\">\r\n                    <span>\r\n                        <UserOutlined />\r\n                    </span>\r\n                    <span>该模版由</span>\r\n                    <span>{{ detailData.author }}</span>\r\n                    <span>创作</span>\r\n                </div>\r\n                <div class=\"bt-group\">\r\n                    <a-button shape=\"round\" size=\"middle\" type='primary'\r\n                        @click=\"editWork(detailData.id)\">使用模版</a-button>\r\n                    <a-button shape=\"round\" size=\"middle\" @click=\"onDownload(detailData.title, detailData.coverImg)\">\r\n                        <template #icon>\r\n                            <DownloadOutlined />\r\n                        </template>\r\n                        下载封面</a-button>\r\n                </div>\r\n                <div class=\"\">\r\n                    <div class=\"desc\">扫一扫，手机预览</div>\r\n                    <!-- <img src=\"#\" height=\"200\" width=\"200\"> -->\r\n                </div>\r\n\r\n                <div class=\"bt-group-footer\">\r\n                    <a-button shape=\"round\" size=\"middle\" danger :loading=\"deleteTemplateLoading\"\r\n                        @click=\"showDeleteConfirm(detailData.id)\">\r\n                        <template #icon>\r\n                            <DeleteOutlined />\r\n                        </template>\r\n                        删除模版</a-button>\r\n                    <a-button shape=\"round\" size=\"middle\" @click=\"$router.go(-1)\">\r\n                        <RedoOutlined />返回列表\r\n                    </a-button>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </a-spin>\r\n</template>\r\n\r\n<script setup lang='ts'>\r\nimport { ref, onMounted, createVNode } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { reqDetailWork, reqDeleteWork } from '@/api/works/workItem'\r\nimport { DetailTemplateOrWork } from '@/type/api/work'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons-vue'\r\nimport onDownload from '@/utils/downloadFile'\r\n\r\nconst $route = useRoute()\r\nconst $router = useRouter()\r\n\r\nconst spinning = ref<boolean>(false)\r\nconst detailData = ref<DetailTemplateOrWork>({} as DetailTemplateOrWork)\r\nconst deleteTemplateLoading = ref(false)\r\n\r\nonMounted(async () => {\r\n    spinning.value = true\r\n    // 加载模版详细\r\n    try {\r\n        const result = await reqDetailWork(Number($route.params.id))\r\n        if (result.errno !== 0) {\r\n            $router.go(-1)\r\n        } else {\r\n            detailData.value = result.data\r\n        }\r\n    } catch (error) {\r\n        $router.go(-1)\r\n    } finally {\r\n        spinning.value = false\r\n    }\r\n})\r\n\r\nconst editWork = (id: number) => {\r\n    $router.push('/edit-work/' + id)\r\n}\r\n\r\nconst showDeleteConfirm = (id: number) => {\r\n    Modal.confirm({\r\n        title: '确定删除该模版吗？',\r\n        icon: createVNode(ExclamationCircleOutlined),\r\n        okText: '确定',\r\n        okType: 'primary',\r\n        cancelText: '取消',\r\n        onOk() {\r\n            deleteWork(id)\r\n        },\r\n        onCancel() {\r\n            console.log('Cancel')\r\n        }\r\n    })\r\n}\r\n\r\nconst deleteWork = async (id: number) => {\r\n    deleteTemplateLoading.value = true\r\n    try {\r\n        await reqDeleteWork(id)\r\n        message.success('删除作品成功')\r\n        $router.go(-1)\r\n    } catch (error) {\r\n\r\n    } finally {\r\n        deleteTemplateLoading.value = false\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n.ant-spin-nested-loading {\r\n    height: 100%;\r\n}\r\n\r\n::v-deep() .ant-spin-nested-loading>div {\r\n    height: 100%;\r\n}\r\n\r\n::v-deep() .ant-spin {\r\n    max-height: 100% !important;\r\n}\r\n\r\n.detail-box {\r\n    display: flex;\r\n    justify-content: center;\r\n    gap: 17px;\r\n    padding-top: 35px;\r\n    // min-height: 600px;\r\n\r\n    .left {\r\n        width: 35%;\r\n\r\n        img {\r\n            min-height: 620px;\r\n            object-fit: fill;\r\n        }\r\n    }\r\n\r\n    .right {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 18px;\r\n        height: 100%;\r\n        width: 35%;\r\n\r\n        .title {\r\n            font-size: 23px;\r\n        }\r\n\r\n        .desc {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 8px;\r\n            opacity: 0.7;\r\n            font-size: 15px;\r\n\r\n            &>span:first-child {\r\n                background-color: rgb(204, 204, 204);\r\n                padding: 5px;\r\n                border-radius: 50%;\r\n            }\r\n        }\r\n\r\n        .bt-group {\r\n            display: flex;\r\n            gap: 9px;\r\n        }\r\n\r\n        .bt-group-footer {\r\n            width: 90%;\r\n            display: flex;\r\n            flex-direction: column;\r\n            gap: 7px;\r\n\r\n            ::v-deep() .ant-btn {\r\n                height: 38px !important;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import script from \"./detailTemplate.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./detailTemplate.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./detailTemplate.vue?vue&type=style&index=0&id=57d36872&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.4.38_vue@3.4.38_webpack@5.91.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-57d36872\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_createElementVNode","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_defineComponent","__name","setup","__props","$route","useRoute","$router","useRouter","spinning","ref","detailData","deleteTemplateLoading","onMounted","async","value","result","reqDetailWork","Number","params","id","errno","go","data","error","editWork","push","showDeleteConfirm","Modal","confirm","title","icon","createVNode","ExclamationCircleOutlined","okText","okType","cancelText","onOk","deleteWork","onCancel","console","log","reqDeleteWork","message","success","_ctx","_cache","_component_UserOutlined","_resolveComponent","_component_a_button","_component_DownloadOutlined","_component_DeleteOutlined","_component_RedoOutlined","_component_a_spin","_openBlock","_createBlock","size","tip","default","_withCtx","_createElementBlock","key","src","coverImg","alt","_createCommentVNode","_toDisplayString","desc","_createVNode","author","shape","type","onClick","$event","_createTextVNode","_","_unref","onDownload","danger","loading","__exports__"],"sourceRoot":""}