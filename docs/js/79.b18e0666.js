"use strict";(self["webpackChunkquestion_star"]=self["webpackChunkquestion_star"]||[]).push([[79],{66915:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ai}});var o=n(1877),i=n(89588),r=n(80725),a=n(27656),l=n(33984);const s={...l.L_,...l.PB},c={...l.L_,paddingTop:"0px",paddingBottom:"0px",width:"100px",...l.Pl},d={...l.L_,...l.PB,fontSize:"17px",paddingLeft:"10px",paddingRight:"10px"},u={...l.Vv,width:"70px",height:"70px"},p=[{label:"普通文本",widgetList:[{name:"QsText",props:{...s,titleValue:"标题文字1",tag:"h2"},icon:"editor-h1",title:"一级标题"},{name:"QsText",props:{...s,titleValue:"标题文字2",tag:"h4"},icon:"editor-h2",title:"二级标题"},{name:"QsText",props:{...s,titleValue:"标题文字3",tag:"p"},icon:"editor-h3",title:"三级标题"},{name:"QsText",props:{...s,textValue:"正文内容",tag:"p"},icon:"CopyOutlined",title:"段落"}]},{label:"图片类型",widgetList:[{name:"QsImg",props:{...c},icon:"PictureOutlined",title:"图片"}]},{label:"艺术字体",isRenderCard:!0,renderStyleKey:"font-family",widgetList:[{name:"QsStyleFont",props:{...d,"font-family":'"KaiTi","STKaiti"',textValue:"楷体标题"},title:"楷体标题"},{name:"QsStyleFont",props:{...d,"font-family":'"Arial", "sans-serif"',textValue:"Arial"},title:"Arial"},{name:"QsStyleFont",props:{...d,"font-family":'"FangSong","STFangsong"',textValue:"仿宋正文"},title:"仿宋正文"},{name:"QsStyleFont",props:{...d,"font-family":'"Comic Sans MS"',textValue:"Comic Sans"},title:"Comic Sans"},{name:"QsStyleFont",props:{...d,"font-family":'"Courier New", monospace',textValue:"Courier New"},title:"Courier New"},{name:"QsStyleFont",props:{...d,"font-family":'"Times New Roman", serif',textValue:"Times New Roman"},title:"Times New Roman"}]},{label:"形状图案",isRenderCard:!0,needRenderWidget:!0,widgetList:[{name:"QsShape",props:{...u,shapeValue:"triangle","background-color":"#ffc0cb"},title:"三角形"},{name:"QsShape",props:{...u,shapeValue:"circular","background-color":"#5ccac7"},title:"圆形"},{name:"QsShape",props:{...u,shapeValue:"square","background-color":"#56aaee"},title:"正方形"},{name:"QsShape",props:{...u,shapeValue:"square","background-color":"#9666d1",width:"100px",height:"50px"},title:"长方形"}]}];var h=p,f=n(29041);function g(){const e=(0,f.P)(),t=(e,t)=>{const n=e.target.closest(".widget-wrapper"),o=n.getBoundingClientRect(),i=e.clientX-o.left,r=e.clientY-o.top;e.dataTransfer?.setData("text/plain",JSON.stringify({widgetData:t,originOffestX:i,originOffestY:r}))},n=e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},o=t=>{t.preventDefault();const n=JSON.parse(t.dataTransfer.getData("text/plain")),o=t.target.closest(".middle-box"),i=o.getBoundingClientRect(),r=t.clientX-i.left-n.originOffestX,a=t.clientY-i.top-n.originOffestY;n.widgetData.props.left=r+"px",n.widgetData.props.top=a+"px",e.commit("editorStore/addWidget",{widgetData:n.widgetData}),t.dataTransfer?.clearData()};return{ondragstart:t,ondragover:n,ondrop:o}}var m=(0,o.pM)({__name:"widgetWrapper",props:{widget:{}},setup(e){const t=e,n=(0,f.P)(),{ondragstart:i}=g(),a=()=>{n.commit("editorStore/addWidget",{widgetData:t.widget})};return(e,n)=>((0,o.uX)(),(0,o.CE)("div",{class:"widget-wrapper",draggable:"true",onClick:a,onDragstart:n[0]||(n[0]=e=>(0,r.R1)(i)(e,t.widget))},[(0,o.RG)(e.$slots,"default")],32))}}),v=n(91139);const b=(0,v.A)(m,[["__scopeId","data-v-943413ae"]]);var y=b;const w={key:0,class:"icon-box flex-center"};var x=(0,o.pM)({__name:"commonWidgetsList",setup(e){return(e,t)=>{const n=(0,o.g2)("IconSvg"),a=(0,o.g2)("a-col");return(0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,r.R1)(h),((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"widget-template-box",key:t},[(0,o.Lk)("h3",null,(0,i.v_)(e.label),1),(0,o.Lk)("div",{class:(0,i.C4)(e.isRenderCard?"widget-card-box":"widget-type-box")},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.widgetList,((t,r)=>((0,o.uX)(),(0,o.Wv)(a,{span:11,key:r},{default:(0,o.k6)((()=>[(0,o.bF)(y,{class:"widget-item",widget:t},{default:(0,o.k6)((()=>[e.needRenderWidget?((0,o.uX)(),(0,o.Wv)((0,o.$y)(t.name),(0,o.v6)({key:1,class:"",style:{transform:"scale(0.8)"},ref_for:!0},{...t.props,widgetTitle:t.title}),null,16)):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[e.isRenderCard?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",w,[(0,o.bF)(n,{name:t.icon},null,8,["name"])])),(0,o.Lk)("h4",{class:"title",style:(0,i.Tr)(e.renderStyleKey?{[e.renderStyleKey]:t.props[e.renderStyleKey]}:{})},(0,i.v_)(t.title),5)],64))])),_:2},1032,["widget"])])),_:2},1024)))),128))],2)])))),128)}}});const E=(0,v.A)(x,[["__scopeId","data-v-3bb92d60"]]);var k=E;n(45680);
/*!
  * vue-draggable-next v2.2.0
  * (c) 2023 Anish George
  * @license MIT
  */
/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){return C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(){return D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},D.apply(this,arguments)}function O(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}function P(e,t){if(null==e)return{};var n,o,i=O(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var I="1.14.0";function R(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var L=R(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),X=R(/Edge/i),N=R(/firefox/i),A=R(/safari/i)&&!R(/chrome/i)&&!R(/android/i),W=R(/iP(ad|od|hone)/i),M=R(/chrome/i)&&R(/android/i),F={capture:!1,passive:!1};function K(e,t,n){e.addEventListener(t,n,!L&&F)}function Y(e,t,n){e.removeEventListener(t,n,!L&&F)}function V(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function B(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function j(e,t,n,o){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&V(e,t):V(e,t))||o&&e===n)return e;if(e===n)break}while(e=B(e))}return null}var $,U=/\s+/g;function H(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(U," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(U," ")}}function Q(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=n+("string"===typeof n?"":"px")}}function G(e,t){var n="";if("string"===typeof e)n=e;else do{var o=Q(e,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function z(e,t,n){if(e){var o=e.getElementsByTagName(t),i=0,r=o.length;if(n)for(;i<r;i++)n(o[i],i);return o}return[]}function q(){var e=document.scrollingElement;return e||document.documentElement}function Z(e,t,n,o,i){if(e.getBoundingClientRect||e===window){var r,a,l,s,c,d,u;if(e!==window&&e.parentNode&&e!==q()?(r=e.getBoundingClientRect(),a=r.top,l=r.left,s=r.bottom,c=r.right,d=r.height,u=r.width):(a=0,l=0,s=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!L))do{if(i&&i.getBoundingClientRect&&("none"!==Q(i,"transform")||n&&"static"!==Q(i,"position"))){var p=i.getBoundingClientRect();a-=p.top+parseInt(Q(i,"border-top-width")),l-=p.left+parseInt(Q(i,"border-left-width")),s=a+r.height,c=l+r.width;break}}while(i=i.parentNode);if(o&&e!==window){var h=G(i||e),f=h&&h.a,g=h&&h.d;h&&(a/=g,l/=f,u/=f,d/=g,s=a+d,c=l+u)}return{top:a,left:l,bottom:s,right:c,width:u,height:d}}}function J(e,t,n){var o=re(e,!0),i=Z(e)[t];while(o){var r=Z(o)[n],a=void 0;if(a="top"===n||"left"===n?i>=r:i<=r,!a)return o;if(o===q())break;o=re(o,!1)}return!1}function ee(e,t,n,o){var i=0,r=0,a=e.children;while(r<a.length){if("none"!==a[r].style.display&&a[r]!==gt.ghost&&(o||a[r]!==gt.dragged)&&j(a[r],n.draggable,e,!1)){if(i===t)return a[r];i++}r++}return null}function te(e,t){var n=e.lastElementChild;while(n&&(n===gt.ghost||"none"===Q(n,"display")||t&&!V(n,t)))n=n.previousElementSibling;return n||null}function ne(e,t){var n=0;if(!e||!e.parentNode)return-1;while(e=e.previousElementSibling)"TEMPLATE"===e.nodeName.toUpperCase()||e===gt.clone||t&&!V(e,t)||n++;return n}function oe(e){var t=0,n=0,o=q();if(e)do{var i=G(e),r=i.a,a=i.d;t+=e.scrollLeft*r,n+=e.scrollTop*a}while(e!==o&&(e=e.parentNode));return[t,n]}function ie(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n);return-1}function re(e,t){if(!e||!e.getBoundingClientRect)return q();var n=e,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Q(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return q();if(o||t)return n;o=!0}}}while(n=n.parentNode);return q()}function ae(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function le(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function se(e,t){return function(){if(!$){var n=arguments,o=this;1===n.length?e.call(o,n[0]):e.apply(o,n),$=setTimeout((function(){$=void 0}),t)}}}function ce(){clearTimeout($),$=void 0}function de(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function ue(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var pe="Sortable"+(new Date).getTime();function he(){var e,t=[];return{captureAnimationState:function(){if(t=[],this.options.animation){var e=[].slice.call(this.el.children);e.forEach((function(e){if("none"!==Q(e,"display")&&e!==gt.ghost){t.push({target:e,rect:Z(e)});var n=_({},t[t.length-1].rect);if(e.thisAnimationDuration){var o=G(e,!0);o&&(n.top-=o.f,n.left-=o.e)}e.fromRect=n}}))}},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(ie(t,{target:e}),1)},animateAll:function(n){var o=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof n&&n());var i=!1,r=0;t.forEach((function(e){var t=0,n=e.target,a=n.fromRect,l=Z(n),s=n.prevFromRect,c=n.prevToRect,d=e.rect,u=G(n,!0);u&&(l.top-=u.f,l.left-=u.e),n.toRect=l,n.thisAnimationDuration&&le(s,l)&&!le(a,l)&&(d.top-l.top)/(d.left-l.left)===(a.top-l.top)/(a.left-l.left)&&(t=ge(d,s,c,o.options)),le(l,a)||(n.prevFromRect=a,n.prevToRect=l,t||(t=o.options.animation),o.animate(n,d,l,t)),t&&(i=!0,r=Math.max(r,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),i?e=setTimeout((function(){"function"===typeof n&&n()}),r):"function"===typeof n&&n(),t=[]},animate:function(e,t,n,o){if(o){Q(e,"transition",""),Q(e,"transform","");var i=G(this.el),r=i&&i.a,a=i&&i.d,l=(t.left-n.left)/(r||1),s=(t.top-n.top)/(a||1);e.animatingX=!!l,e.animatingY=!!s,Q(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=fe(e),Q(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Q(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){Q(e,"transition",""),Q(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),o)}}}}function fe(e){return e.offsetWidth}function ge(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var me=[],ve={initializeByDefault:!0},be={mount:function(e){for(var t in ve)ve.hasOwnProperty(t)&&!(t in e)&&(e[t]=ve[t]);me.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),me.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var i=e+"Global";me.forEach((function(o){t[o.pluginName]&&(t[o.pluginName][i]&&t[o.pluginName][i](_({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](_({sortable:t},n)))}))},initializePlugins:function(e,t,n,o){for(var i in me.forEach((function(o){var i=o.pluginName;if(e.options[i]||o.initializeByDefault){var r=new o(e,t,e.options);r.sortable=e,r.options=e.options,e[i]=r,D(n,r.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var r=this.modifyOption(e,i,e.options[i]);"undefined"!==typeof r&&(e.options[i]=r)}},getEventProperties:function(e,t){var n={};return me.forEach((function(o){"function"===typeof o.eventProperties&&D(n,o.eventProperties.call(t[o.pluginName],e))})),n},modifyOption:function(e,t,n){var o;return me.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"===typeof i.optionListeners[t]&&(o=i.optionListeners[t].call(e[i.pluginName],n))})),o}};function ye(e){var t=e.sortable,n=e.rootEl,o=e.name,i=e.targetEl,r=e.cloneEl,a=e.toEl,l=e.fromEl,s=e.oldIndex,c=e.newIndex,d=e.oldDraggableIndex,u=e.newDraggableIndex,p=e.originalEvent,h=e.putSortable,f=e.extraEventProperties;if(t=t||n&&n[pe],t){var g,m=t.options,v="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||L||X?(g=document.createEvent("Event"),g.initEvent(o,!0,!0)):g=new CustomEvent(o,{bubbles:!0,cancelable:!0}),g.to=a||n,g.from=l||n,g.item=i||n,g.clone=r,g.oldIndex=s,g.newIndex=c,g.oldDraggableIndex=d,g.newDraggableIndex=u,g.originalEvent=p,g.pullMode=h?h.lastPutMode:void 0;var b=_(_({},f),be.getEventProperties(o,t));for(var y in b)g[y]=b[y];n&&n.dispatchEvent(g),m[v]&&m[v].call(t,g)}}var we=["evt"],xe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.evt,i=P(n,we);be.pluginEvent.bind(gt)(e,t,_({dragEl:ke,parentEl:Se,ghostEl:_e,rootEl:Ce,nextEl:Te,lastDownEl:De,cloneEl:Oe,cloneHidden:Pe,dragStarted:Be,putSortable:Ae,activeSortable:gt.active,originalEvent:o,oldIndex:Ie,oldDraggableIndex:Le,newIndex:Re,newDraggableIndex:Xe,hideGhostForTarget:ut,unhideGhostForTarget:pt,cloneNowHidden:function(){Pe=!0},cloneNowShown:function(){Pe=!1},dispatchSortableEvent:function(e){Ee({sortable:t,name:e,originalEvent:o})}},i))};function Ee(e){ye(_({putSortable:Ae,cloneEl:Oe,targetEl:ke,rootEl:Ce,oldIndex:Ie,oldDraggableIndex:Le,newIndex:Re,newDraggableIndex:Xe},e))}var ke,Se,_e,Ce,Te,De,Oe,Pe,Ie,Re,Le,Xe,Ne,Ae,We,Me,Fe,Ke,Ye,Ve,Be,je,$e,Ue,He,Qe=!1,Ge=!1,ze=[],qe=!1,Ze=!1,Je=[],et=!1,tt=[],nt="undefined"!==typeof document,ot=W,it=X||L?"cssFloat":"float",rt=nt&&!M&&!W&&"draggable"in document.createElement("div"),at=function(){if(nt){if(L)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),lt=function(e,t){var n=Q(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=ee(e,0,t),r=ee(e,1,t),a=i&&Q(i),l=r&&Q(r),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Z(i).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Z(r).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&a["float"]&&"none"!==a["float"]){var d="left"===a["float"]?"left":"right";return!r||"both"!==l.clear&&l.clear!==d?"horizontal":"vertical"}return i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||s>=o&&"none"===n[it]||r&&"none"===n[it]&&s+c>o)?"vertical":"horizontal"},st=function(e,t,n){var o=n?e.left:e.top,i=n?e.right:e.bottom,r=n?e.width:e.height,a=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return o===a||i===l||o+r/2===a+s/2},ct=function(e,t){var n;return ze.some((function(o){var i=o[pe].options.emptyInsertThreshold;if(i&&!te(o)){var r=Z(o),a=e>=r.left-i&&e<=r.right+i,l=t>=r.top-i&&t<=r.bottom+i;return a&&l?n=o:void 0}})),n},dt=function(e){function t(e,n){return function(o,i,r,a){var l=o.options.group.name&&i.options.group.name&&o.options.group.name===i.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"===typeof e)return t(e(o,i,r,a),n)(o,i,r,a);var s=(n?o:i).options.group.name;return!0===e||"string"===typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},o=e.group;o&&"object"==C(o)||(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},ut=function(){!at&&_e&&Q(_e,"display","none")},pt=function(){!at&&_e&&Q(_e,"display","")};nt&&document.addEventListener("click",(function(e){if(Ge)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Ge=!1,!1}),!0);var ht=function(e){if(ke){e=e.touches?e.touches[0]:e;var t=ct(e.clientX,e.clientY);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[pe]._onDragOver(n)}}},ft=function(e){ke&&ke.parentNode[pe]._isOutsideThisEl(e.target)};function gt(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=D({},t),e[pe]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return lt(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==gt.supportPointer&&"PointerEvent"in window&&!A,emptyInsertThreshold:5};for(var o in be.initializePlugins(this,e,n),n)!(o in t)&&(t[o]=n[o]);for(var i in dt(t),this)"_"===i.charAt(0)&&"function"===typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&rt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?K(e,"pointerdown",this._onTapStart):(K(e,"mousedown",this._onTapStart),K(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(K(e,"dragover",this),K(e,"dragenter",this)),ze.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),D(this,he())}function mt(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function vt(e,t,n,o,i,r,a,l){var s,c,d=e[pe],u=d.options.onMove;return!window.CustomEvent||L||X?(s=document.createEvent("Event"),s.initEvent("move",!0,!0)):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=o,s.related=i||t,s.relatedRect=r||Z(t),s.willInsertAfter=l,s.originalEvent=a,e.dispatchEvent(s),u&&(c=u.call(d,s,a)),c}function bt(e){e.draggable=!1}function yt(){et=!1}function wt(e,t,n){var o=Z(ee(n.el,0,n.options,!0)),i=10;return t?e.clientX<o.left-i||e.clientY<o.top&&e.clientX<o.right:e.clientY<o.top-i||e.clientY<o.bottom&&e.clientX<o.left}function xt(e,t,n){var o=Z(te(n.el,n.options.draggable)),i=10;return t?e.clientX>o.right+i||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+i}function Et(e,t,n,o,i,r,a,l){var s=o?e.clientY:e.clientX,c=o?n.height:n.width,d=o?n.top:n.left,u=o?n.bottom:n.right,p=!1;if(!a)if(l&&Ue<c*i){if(!qe&&(1===$e?s>d+c*r/2:s<u-c*r/2)&&(qe=!0),qe)p=!0;else if(1===$e?s<d+Ue:s>u-Ue)return-$e}else if(s>d+c*(1-i)/2&&s<u-c*(1-i)/2)return kt(t);return p=p||a,p&&(s<d+c*r/2||s>u-c*r/2)?s>d+c/2?1:-1:0}function kt(e){return ne(ke)<ne(e)?1:-1}function St(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;while(n--)o+=t.charCodeAt(n);return o.toString(36)}function _t(e){tt.length=0;var t=e.getElementsByTagName("input"),n=t.length;while(n--){var o=t[n];o.checked&&tt.push(o)}}function Ct(e){return setTimeout(e,0)}function Tt(e){return clearTimeout(e)}gt.prototype={constructor:gt,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(je=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,ke):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,i=o.preventOnFilter,r=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(a||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=o.filter;if(_t(n),!ke&&!(/mousedown|pointerdown/.test(r)&&0!==e.button||o.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!A||!l||"SELECT"!==l.tagName.toUpperCase())&&(l=j(l,o.draggable,n,!1),(!l||!l.animated)&&De!==l)){if(Ie=ne(l),Le=ne(l,o.draggable),"function"===typeof c){if(c.call(this,e,l,this))return Ee({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),xe("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(o){if(o=j(s,o.trim(),n,!1),o)return Ee({sortable:t,rootEl:o,name:"filter",targetEl:l,fromEl:n,toEl:n}),xe("filter",t,{evt:e}),!0})),c))return void(i&&e.cancelable&&e.preventDefault());o.handle&&!j(s,o.handle,n,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,n){var o,i=this,r=i.el,a=i.options,l=r.ownerDocument;if(n&&!ke&&n.parentNode===r){var s=Z(n);if(Ce=r,ke=n,Se=ke.parentNode,Te=ke.nextSibling,De=n,Ne=a.group,gt.dragged=ke,We={target:ke,clientX:(t||e).clientX,clientY:(t||e).clientY},Ye=We.clientX-s.left,Ve=We.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,ke.style["will-change"]="all",o=function(){xe("delayEnded",i,{evt:e}),gt.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!N&&i.nativeDraggable&&(ke.draggable=!0),i._triggerDragStart(e,t),Ee({sortable:i,name:"choose",originalEvent:e}),H(ke,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){z(ke,e.trim(),bt)})),K(l,"dragover",ht),K(l,"mousemove",ht),K(l,"touchmove",ht),K(l,"mouseup",i._onDrop),K(l,"touchend",i._onDrop),K(l,"touchcancel",i._onDrop),N&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ke.draggable=!0),xe("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(X||L))o();else{if(gt.eventCanceled)return void this._onDrop();K(l,"mouseup",i._disableDelayedDrag),K(l,"touchend",i._disableDelayedDrag),K(l,"touchcancel",i._disableDelayedDrag),K(l,"mousemove",i._delayedDragTouchMoveHandler),K(l,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&K(l,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(o,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ke&&bt(ke),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Y(e,"mouseup",this._disableDelayedDrag),Y(e,"touchend",this._disableDelayedDrag),Y(e,"touchcancel",this._disableDelayedDrag),Y(e,"mousemove",this._delayedDragTouchMoveHandler),Y(e,"touchmove",this._delayedDragTouchMoveHandler),Y(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?K(document,"pointermove",this._onTouchMove):K(document,t?"touchmove":"mousemove",this._onTouchMove):(K(ke,"dragend",this),K(Ce,"dragstart",this._onDragStart));try{document.selection?Ct((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(Qe=!1,Ce&&ke){xe("dragStarted",this,{evt:t}),this.nativeDraggable&&K(document,"dragover",ft);var n=this.options;!e&&H(ke,n.dragClass,!1),H(ke,n.ghostClass,!0),gt.active=this,e&&this._appendGhost(),Ee({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Me){this._lastX=Me.clientX,this._lastY=Me.clientY,ut();var e=document.elementFromPoint(Me.clientX,Me.clientY),t=e;while(e&&e.shadowRoot){if(e=e.shadowRoot.elementFromPoint(Me.clientX,Me.clientY),e===t)break;t=e}if(ke.parentNode[pe]._isOutsideThisEl(e),t)do{if(t[pe]){var n=void 0;if(n=t[pe]._onDragOver({clientX:Me.clientX,clientY:Me.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);pt()}},_onTouchMove:function(e){if(We){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,i=e.touches?e.touches[0]:e,r=_e&&G(_e,!0),a=_e&&r&&r.a,l=_e&&r&&r.d,s=ot&&He&&oe(He),c=(i.clientX-We.clientX+o.x)/(a||1)+(s?s[0]-Je[0]:0)/(a||1),d=(i.clientY-We.clientY+o.y)/(l||1)+(s?s[1]-Je[1]:0)/(l||1);if(!gt.active&&!Qe){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(_e){r?(r.e+=c-(Fe||0),r.f+=d-(Ke||0)):r={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");Q(_e,"webkitTransform",u),Q(_e,"mozTransform",u),Q(_e,"msTransform",u),Q(_e,"transform",u),Fe=c,Ke=d,Me=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!_e){var e=this.options.fallbackOnBody?document.body:Ce,t=Z(ke,!0,ot,!0,e),n=this.options;if(ot){He=e;while("static"===Q(He,"position")&&"none"===Q(He,"transform")&&He!==document)He=He.parentNode;He!==document.body&&He!==document.documentElement?(He===document&&(He=q()),t.top+=He.scrollTop,t.left+=He.scrollLeft):He=q(),Je=oe(He)}_e=ke.cloneNode(!0),H(_e,n.ghostClass,!1),H(_e,n.fallbackClass,!0),H(_e,n.dragClass,!0),Q(_e,"transition",""),Q(_e,"transform",""),Q(_e,"box-sizing","border-box"),Q(_e,"margin",0),Q(_e,"top",t.top),Q(_e,"left",t.left),Q(_e,"width",t.width),Q(_e,"height",t.height),Q(_e,"opacity","0.8"),Q(_e,"position",ot?"absolute":"fixed"),Q(_e,"zIndex","100000"),Q(_e,"pointerEvents","none"),gt.ghost=_e,e.appendChild(_e),Q(_e,"transform-origin",Ye/parseInt(_e.style.width)*100+"% "+Ve/parseInt(_e.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,i=n.options;xe("dragStart",this,{evt:e}),gt.eventCanceled?this._onDrop():(xe("setupClone",this),gt.eventCanceled||(Oe=ue(ke),Oe.draggable=!1,Oe.style["will-change"]="",this._hideClone(),H(Oe,this.options.chosenClass,!1),gt.clone=Oe),n.cloneId=Ct((function(){xe("clone",n),gt.eventCanceled||(n.options.removeCloneOnHide||Ce.insertBefore(Oe,ke),n._hideClone(),Ee({sortable:n,name:"clone"}))})),!t&&H(ke,i.dragClass,!0),t?(Ge=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Y(document,"mouseup",n._onDrop),Y(document,"touchend",n._onDrop),Y(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(n,o,ke)),K(document,"drop",n),Q(ke,"transform","translateZ(0)")),Qe=!0,n._dragStartId=Ct(n._dragStarted.bind(n,t,e)),K(document,"selectstart",n),Be=!0,A&&Q(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,o,i,r=this.el,a=e.target,l=this.options,s=l.group,c=gt.active,d=Ne===s,u=l.sort,p=Ae||c,h=this,f=!1;if(!et){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=j(a,l.draggable,r,!0),P("dragOver"),gt.eventCanceled)return f;if(ke.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||h._ignoreWhileAnimating===a)return R(!1);if(Ge=!1,c&&!l.disabled&&(d?u||(o=Se!==Ce):Ae===this||(this.lastPutMode=Ne.checkPull(this,c,ke,e))&&s.checkPut(this,c,ke,e))){if(i="vertical"===this._getDirection(e,a),t=Z(ke),P("dragOverValid"),gt.eventCanceled)return f;if(o)return Se=Ce,I(),this._hideClone(),P("revert"),gt.eventCanceled||(Te?Ce.insertBefore(ke,Te):Ce.appendChild(ke)),R(!0);var g=te(r,l.draggable);if(!g||xt(e,i,this)&&!g.animated){if(g===ke)return R(!1);if(g&&r===e.target&&(a=g),a&&(n=Z(a)),!1!==vt(Ce,r,ke,t,a,n,e,!!a))return I(),r.appendChild(ke),Se=r,L(),R(!0)}else if(g&&wt(e,i,this)){var m=ee(r,0,l,!0);if(m===ke)return R(!1);if(a=m,n=Z(a),!1!==vt(Ce,r,ke,t,a,n,e,!1))return I(),r.insertBefore(ke,m),Se=r,L(),R(!0)}else if(a.parentNode===r){n=Z(a);var v,b,y=0,w=ke.parentNode!==r,x=!st(ke.animated&&ke.toRect||t,a.animated&&a.toRect||n,i),E=i?"top":"left",k=J(a,"top","top")||J(ke,"top","top"),S=k?k.scrollTop:void 0;if(je!==a&&(v=n[E],qe=!1,Ze=!x&&l.invertSwap||w),y=Et(e,a,n,i,x?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Ze,je===a),0!==y){var C=ne(ke);do{C-=y,b=Se.children[C]}while(b&&("none"===Q(b,"display")||b===_e))}if(0===y||b===a)return R(!1);je=a,$e=y;var T=a.nextElementSibling,D=!1;D=1===y;var O=vt(Ce,r,ke,t,a,n,e,D);if(!1!==O)return 1!==O&&-1!==O||(D=1===O),et=!0,setTimeout(yt,30),I(),D&&!T?r.appendChild(ke):a.parentNode.insertBefore(ke,D?T:a),k&&de(k,0,S-k.scrollTop),Se=ke.parentNode,void 0===v||Ze||(Ue=Math.abs(v-Z(a)[E])),L(),R(!0)}if(r.contains(ke))return R(!1)}return!1}function P(l,s){xe(l,h,_({evt:e,isOwner:d,axis:i?"vertical":"horizontal",revert:o,dragRect:t,targetRect:n,canSort:u,fromSortable:p,target:a,completed:R,onMove:function(n,o){return vt(Ce,r,ke,t,n,Z(n),e,o)},changed:L},s))}function I(){P("dragOverAnimationCapture"),h.captureAnimationState(),h!==p&&p.captureAnimationState()}function R(t){return P("dragOverCompleted",{insertion:t}),t&&(d?c._hideClone():c._showClone(h),h!==p&&(H(ke,Ae?Ae.options.ghostClass:c.options.ghostClass,!1),H(ke,l.ghostClass,!0)),Ae!==h&&h!==gt.active?Ae=h:h===gt.active&&Ae&&(Ae=null),p===h&&(h._ignoreWhileAnimating=a),h.animateAll((function(){P("dragOverAnimationComplete"),h._ignoreWhileAnimating=null})),h!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(a===ke&&!ke.animated||a===r&&!a.animated)&&(je=null),l.dragoverBubble||e.rootEl||a===document||(ke.parentNode[pe]._isOutsideThisEl(e.target),!t&&ht(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),f=!0}function L(){Re=ne(ke),Xe=ne(ke,l.draggable),Ee({sortable:h,name:"change",toEl:r,newIndex:Re,newDraggableIndex:Xe,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Y(document,"mousemove",this._onTouchMove),Y(document,"touchmove",this._onTouchMove),Y(document,"pointermove",this._onTouchMove),Y(document,"dragover",ht),Y(document,"mousemove",ht),Y(document,"touchmove",ht)},_offUpEvents:function(){var e=this.el.ownerDocument;Y(e,"mouseup",this._onDrop),Y(e,"touchend",this._onDrop),Y(e,"pointerup",this._onDrop),Y(e,"touchcancel",this._onDrop),Y(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;Re=ne(ke),Xe=ne(ke,n.draggable),xe("drop",this,{evt:e}),Se=ke&&ke.parentNode,Re=ne(ke),Xe=ne(ke,n.draggable),gt.eventCanceled||(Qe=!1,Ze=!1,qe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Tt(this.cloneId),Tt(this._dragStartId),this.nativeDraggable&&(Y(document,"drop",this),Y(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),A&&Q(document.body,"user-select",""),Q(ke,"transform",""),e&&(Be&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),_e&&_e.parentNode&&_e.parentNode.removeChild(_e),(Ce===Se||Ae&&"clone"!==Ae.lastPutMode)&&Oe&&Oe.parentNode&&Oe.parentNode.removeChild(Oe),ke&&(this.nativeDraggable&&Y(ke,"dragend",this),bt(ke),ke.style["will-change"]="",Be&&!Qe&&H(ke,Ae?Ae.options.ghostClass:this.options.ghostClass,!1),H(ke,this.options.chosenClass,!1),Ee({sortable:this,name:"unchoose",toEl:Se,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ce!==Se?(Re>=0&&(Ee({rootEl:Se,name:"add",toEl:Se,fromEl:Ce,originalEvent:e}),Ee({sortable:this,name:"remove",toEl:Se,originalEvent:e}),Ee({rootEl:Se,name:"sort",toEl:Se,fromEl:Ce,originalEvent:e}),Ee({sortable:this,name:"sort",toEl:Se,originalEvent:e})),Ae&&Ae.save()):Re!==Ie&&Re>=0&&(Ee({sortable:this,name:"update",toEl:Se,originalEvent:e}),Ee({sortable:this,name:"sort",toEl:Se,originalEvent:e})),gt.active&&(null!=Re&&-1!==Re||(Re=Ie,Xe=Le),Ee({sortable:this,name:"end",toEl:Se,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){xe("nulling",this),Ce=ke=Se=_e=Te=Oe=De=Pe=We=Me=Be=Re=Xe=Ie=Le=je=$e=Ae=Ne=gt.dragged=gt.ghost=gt.clone=gt.active=null,tt.forEach((function(e){e.checked=!0})),tt.length=Fe=Ke=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ke&&(this._onDragOver(e),mt(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e,t=[],n=this.el.children,o=0,i=n.length,r=this.options;o<i;o++)e=n[o],j(e,r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||St(e));return t},sort:function(e,t){var n={},o=this.el;this.toArray().forEach((function(e,t){var i=o.children[t];j(i,this.options.draggable,o,!1)&&(n[e]=i)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(o.removeChild(n[e]),o.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return j(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var o=be.modifyOption(this,e,t);n[e]="undefined"!==typeof o?o:t,"group"===e&&dt(n)},destroy:function(){xe("destroy",this);var e=this.el;e[pe]=null,Y(e,"mousedown",this._onTapStart),Y(e,"touchstart",this._onTapStart),Y(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Y(e,"dragover",this),Y(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),ze.splice(ze.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Pe){if(xe("hideClone",this),gt.eventCanceled)return;Q(Oe,"display","none"),this.options.removeCloneOnHide&&Oe.parentNode&&Oe.parentNode.removeChild(Oe),Pe=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Pe){if(xe("showClone",this),gt.eventCanceled)return;ke.parentNode!=Ce||this.options.group.revertClone?Te?Ce.insertBefore(Oe,Te):Ce.appendChild(Oe):Ce.insertBefore(Oe,ke),this.options.group.revertClone&&this.animate(ke,Oe),Q(Oe,"display",""),Pe=!1}}else this._hideClone()}},nt&&K(document,"touchmove",(function(e){(gt.active||Qe)&&e.cancelable&&e.preventDefault()})),gt.utils={on:K,off:Y,css:Q,find:z,is:function(e,t){return!!j(e,t,e,!1)},extend:ae,throttle:se,closest:j,toggleClass:H,clone:ue,index:ne,nextTick:Ct,cancelNextTick:Tt,detectDirection:lt,getChild:ee},gt.get=function(e){return e[pe]},gt.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(gt.utils=_(_({},gt.utils),e.utils)),be.mount(e)}))},gt.create=function(e,t){return new gt(e,t)},gt.version=I;var Dt,Ot,Pt,It,Rt,Lt,Xt=[],Nt=!1;function At(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?K(document,"dragover",this._handleAutoScroll):this.options.supportPointer?K(document,"pointermove",this._handleFallbackAutoScroll):t.touches?K(document,"touchmove",this._handleFallbackAutoScroll):K(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?Y(document,"dragover",this._handleAutoScroll):(Y(document,"pointermove",this._handleFallbackAutoScroll),Y(document,"touchmove",this._handleFallbackAutoScroll),Y(document,"mousemove",this._handleFallbackAutoScroll)),Mt(),Wt(),ce()},nulling:function(){Rt=Ot=Dt=Nt=Lt=Pt=It=null,Xt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,o=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,r=document.elementFromPoint(o,i);if(Rt=e,t||this.options.forceAutoScrollFallback||X||L||A){Ft(e,this.options,r,t);var a=re(r,!0);!Nt||Lt&&o===Pt&&i===It||(Lt&&Mt(),Lt=setInterval((function(){var r=re(document.elementFromPoint(o,i),!0);r!==a&&(a=r,Wt()),Ft(e,n.options,r,t)}),10),Pt=o,It=i)}else{if(!this.options.bubbleScroll||re(r,!0)===q())return void Wt();Ft(e,this.options,re(r,!1),!1)}}},D(e,{pluginName:"scroll",initializeByDefault:!0})}function Wt(){Xt.forEach((function(e){clearInterval(e.pid)})),Xt=[]}function Mt(){clearInterval(Lt)}var Ft=se((function(e,t,n,o){if(t.scroll){var i,r=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,c=q(),d=!1;Ot!==n&&(Ot=n,Wt(),Dt=t.scroll,i=t.scrollFn,!0===Dt&&(Dt=re(n,!0)));var u=0,p=Dt;do{var h=p,f=Z(h),g=f.top,m=f.bottom,v=f.left,b=f.right,y=f.width,w=f.height,x=void 0,E=void 0,k=h.scrollWidth,S=h.scrollHeight,_=Q(h),C=h.scrollLeft,T=h.scrollTop;h===c?(x=y<k&&("auto"===_.overflowX||"scroll"===_.overflowX||"visible"===_.overflowX),E=w<S&&("auto"===_.overflowY||"scroll"===_.overflowY||"visible"===_.overflowY)):(x=y<k&&("auto"===_.overflowX||"scroll"===_.overflowX),E=w<S&&("auto"===_.overflowY||"scroll"===_.overflowY));var D=x&&(Math.abs(b-r)<=l&&C+y<k)-(Math.abs(v-r)<=l&&!!C),O=E&&(Math.abs(m-a)<=l&&T+w<S)-(Math.abs(g-a)<=l&&!!T);if(!Xt[u])for(var P=0;P<=u;P++)Xt[P]||(Xt[P]={});Xt[u].vx==D&&Xt[u].vy==O&&Xt[u].el===h||(Xt[u].el=h,Xt[u].vx=D,Xt[u].vy=O,clearInterval(Xt[u].pid),0==D&&0==O||(d=!0,Xt[u].pid=setInterval(function(){o&&0===this.layer&&gt.active._onTouchMove(Rt);var t=Xt[this.layer].vy?Xt[this.layer].vy*s:0,n=Xt[this.layer].vx?Xt[this.layer].vx*s:0;"function"===typeof i&&"continue"!==i.call(gt.dragged.parentNode[pe],n,t,e,Rt,Xt[this.layer].el)||de(Xt[this.layer].el,n,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&p!==c&&(p=re(p,!1)));Nt=d}}),30),Kt=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,i=e.activeSortable,r=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||i;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);l(),s&&!s.el.contains(d)&&(r("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function Yt(){}function Vt(){}function Bt(){return"undefined"!==typeof window?window.console:n.g.console}Yt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=ee(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Kt},D(Yt,{pluginName:"revertOnSpill"}),Vt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,o=n||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:Kt},D(Vt,{pluginName:"removeOnSpill"}),gt.mount(new At),gt.mount(Vt,Yt);const jt=Bt();function $t(e){const t=Object.create(null);return function(n){const o=t[n];return o||(t[n]=e(n))}}const Ut=/-(\w)/g,Ht=$t((e=>e.replace(Ut,((e,t)=>t?t.toUpperCase():""))));function Qt(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function Gt(e,t,n){const o=0===n?e.children[0]:e.children[n-1].nextSibling;e.insertBefore(t,o)}function zt(e,t){return Object.values(e).indexOf(t)}function qt(e,t,n,o){if(!e)return[];const i=Object.values(e),r=t.length-o,a=[...t].map(((e,t)=>t>=r?i.length:i.indexOf(e)));return a}function Zt(e,t){this.$nextTick((()=>this.$emit(e.toLowerCase(),t)))}function Jt(e){return t=>{null!==this.realList&&this["onDrag"+e](t),Zt.call(this,e,t)}}function en(e){return["transition-group","TransitionGroup"].includes(e)}function tn(e){if(!e||1!==e.length)return!1;const[{type:t}]=e;return!!t&&en(t.name)}function nn(e,t){return t?{...t.props,...t.attrs}:e}const on=["Start","Add","Remove","Update","End"],rn=["Choose","Unchoose","Sort","Filter","Clone"],an=["Move",...on,...rn].map((e=>"on"+e));let ln=null;const sn={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:e=>e},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},cn=(0,o.pM)({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...on.map((e=>e.toLowerCase())),...rn.map((e=>e.toLowerCase()))],props:sn,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const e=this.$slots.default?this.$slots.default():null,t=nn(this.$attrs,this.componentData);return e?(this.transitionMode=tn(e),(0,o.h)(this.getTag(),t,e)):(0,o.h)(this.getTag(),t,[])},created(){null!==this.list&&null!==this.modelValue&&jt.error("list props are mutually exclusive! Please set one.")},mounted(){const e={};on.forEach((t=>{e["on"+t]=Jt.call(this,t)})),rn.forEach((t=>{e["on"+t]=Zt.bind(this,t)}));const t=Object.keys(this.$attrs).reduce(((e,t)=>(e[Ht(t)]=this.$attrs[t],e)),{}),n=Object.assign({},t,e,{onMove:(e,t)=>this.onDragMove(e,t)});!("draggable"in n)&&(n.draggable=">*");const o=1===this.$el.nodeType?this.$el:this.$el.parentElement;this._sortable=new gt(o,n),o.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{void 0!==this._sortable&&this._sortable.destroy()}catch(e){}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(e){this.updateOptions(e)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?(0,o.g2)(this.component):this.tag},updateOptions(e){for(var t in e){const n=Ht(t);-1===an.indexOf(n)&&this._sortable.option(n,e[t])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick((()=>{this.visibleIndexes=qt(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)}))},getUnderlyingVm(e){const t=zt(this.getChildrenNodes()||[],e);if(-1===t)return null;const n=this.realList[t];return{index:t,element:n}},emitChanges(e){this.$nextTick((()=>{this.$emit("change",e)}))},alterList(e){if(this.list)return void e(this.list);const t=[...this.modelValue];e(t),this.$emit("update:modelValue",t)},spliceList(){const e=e=>e.splice(...arguments);this.alterList(e)},updatePosition(e,t){const n=n=>n.splice(t,0,n.splice(e,1)[0]);this.alterList(n)},getVmIndex(e){const t=this.visibleIndexes,n=t.length;return e>n-1?n:t[e]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(e){if(!this.noTransitionOnDrag||!this.transitionMode)return;var t=this.getChildrenNodes();t[e].data=null;const n=this.getComponent();n.children=[],n.kept=void 0},onDragStart(e){this.computeIndexes(),this.context=this.getUnderlyingVm(e.item),this.context&&(e.item._underlying_vm_=this.clone(this.context.element),ln=e.item)},onDragAdd(e){const t=e.item._underlying_vm_;if(void 0===t)return;Qt(e.item);const n=this.getVmIndex(e.newIndex);this.spliceList(n,0,t),this.computeIndexes();const o={element:t,newIndex:n};this.emitChanges({added:o})},onDragRemove(e){if(Gt(this.$el,e.item,e.oldIndex),"clone"===e.pullMode)return void Qt(e.clone);if(!this.context)return;const t=this.context.index;this.spliceList(t,1);const n={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:n})},onDragUpdate(e){Qt(e.item),Gt(e.from,e.item,e.oldIndex);const t=this.context.index,n=this.getVmIndex(e.newIndex);this.updatePosition(t,n);const o={element:this.context.element,oldIndex:t,newIndex:n};this.emitChanges({moved:o})},updateProperty(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},onDragMove(e,t){const n=this.move;if(!n||!this.realList)return!0;const o=this.getRelatedContextFromMoveEvent(e),i=this.context,r=this.computeFutureIndex(o,e);Object.assign(i,{futureIndex:r});const a=Object.assign({},e,{relatedContext:o,draggedContext:i});return n(a,t)},onDragEnd(){this.computeIndexes(),ln=null},getTrargetedComponent(e){return e.__draggable_component__},getRelatedContextFromMoveEvent({to:e,related:t}){const n=this.getTrargetedComponent(e);if(!n)return{component:n};const o=n.realList,i={list:o,component:n};if(e!==t&&o&&n.getUnderlyingVm){const e=n.getUnderlyingVm(t);if(e)return Object.assign(e,i)}return i},computeFutureIndex(e,t){const n=[...t.to.children].filter((e=>"none"!==e.style["display"]));if(0===n.length)return 0;const o=n.indexOf(t.related),i=e.component.getVmIndex(o),r=-1!==n.indexOf(ln);return r||!t.willInsertAfter?i:i+1}}}),dn=["onClick"];var un=(0,o.pM)({__name:"layerList",setup(e){const t=(0,f.P)(),n=e=>{t.commit("editorStore/selectWidget",e)},a=(e,o,i,r)=>{r&&r.stopPropagation(),n(e),t.commit("editorStore/updateWidget",{changeKey:o,changeValue:i,changeType:"widget"})},l=(0,o.EW)({get(){return t.state.editorStore.components},set(e){t.commit("editorStore/setList",{newlist:e})}});return(e,s)=>{const c=(0,o.g2)("TooltipButton"),d=(0,o.g2)("InlineEdit");return(0,o.uX)(),(0,o.Wv)((0,r.R1)(cn),{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e),handle:".handle",class:"layer-list"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,r.R1)(t).state.editorStore.components,((e,l)=>((0,o.uX)(),(0,o.CE)("li",{class:(0,i.C4)(["layer-row",e.id===(0,r.R1)(t).state.editorStore.currentComponent?"active":""]),key:l,onClick:t=>n(e.id)},[(0,o.bF)(c,{icon:e.isHidden?"EyeOutlined":"EyeInvisibleOutlined",tip:e.isHidden?"显示":"隐藏",onClick:t=>a(e.id,"isHidden",!e.isHidden,t)},null,8,["icon","tip","onClick"]),(0,o.bF)(c,{icon:e.isLocked?"UnlockOutlined":"LockOutlined",tip:e.isLocked?"解锁":"锁定",onClick:t=>a(e.id,"isLocked",!e.isLocked,t)},null,8,["icon","tip","onClick"]),(0,o.bF)(d,{value:e.layerName,"onUpdate:value":t=>a(e.id,"layerName",t),class:"name"},null,8,["value","onUpdate:value"]),(0,o.bF)(c,{icon:"DragOutlined",placement:"right",class:"dragButton handle",tip:"移动图层"})],10,dn)))),128))])),_:1},8,["modelValue"])}}});const pn=(0,v.A)(un,[["__scopeId","data-v-1acfde0a"]]);var hn=pn,fn=(0,o.pM)({__name:"left-region",setup(e){const t=(0,r.KR)(1);return(e,n)=>{const i=(0,o.g2)("AppstoreOutlined"),r=(0,o.g2)("a-tab-pane"),a=(0,o.g2)("BarsOutlined"),l=(0,o.g2)("a-tabs");return(0,o.uX)(),(0,o.Wv)(l,{class:"card-tab",activeKey:t.value,"onUpdate:activeKey":n[0]||(n[0]=e=>t.value=e),tabBarGutter:14},{default:(0,o.k6)((()=>[((0,o.uX)(),(0,o.Wv)(r,{key:1},{tab:(0,o.k6)((()=>[(0,o.bF)(i),(0,o.eW)("组件 ")])),default:(0,o.k6)((()=>[(0,o.bF)(k)])),_:1})),((0,o.uX)(),(0,o.Wv)(r,{key:2},{tab:(0,o.k6)((()=>[(0,o.bF)(a),(0,o.eW)("图层 ")])),default:(0,o.k6)((()=>[(0,o.bF)(hn)])),_:1}))])),_:1},8,["activeKey"])}}});const gn=(0,v.A)(fn,[["__scopeId","data-v-d00849ca"]]);var mn=gn,vn=n(52917),bn=n(74021);const yn=e=>t=>"number"===typeof t?t+e:Number(String(t).replace(e,"")),wn=e=>e.trim(),xn=e=>{const t=t=>t+e,n=t=>Number(String(t).replace(e,""));return{NumberEchoRlues:t,NumberEchoRluesParser:n}},En={src:{components:"fields-img",label:"图片设置"}},kn={titleValue:{components:"a-input",label:"标题",extraProps:{placeholder:"请输入标题"},reverseFormat:wn},textValue:{components:"a-textarea",label:"正文内容",extraProps:{placeholder:"请输入内容"},extraEvents:{input:e=>{e.target.value=e.target.value.trim()}},reverseFormat:wn},"font-size":{components:"a-input-number",label:"字号",extraProps:{max:50,min:10,formatter:xn("px").NumberEchoRlues,parser:xn("px").NumberEchoRluesParser},reverseFormat:yn("px")},"text-align":{components:"a-radio-group",label:"对齐方式",extraProps:{options:[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}],optionType:"button"}},"font-weight":{components:"fields-select",label:"字重",extraProps:{options:Dn("fontWeight",[{label:"lighter",value:"lighter"},{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"bolder",value:"bolder"}])}},"font-family":{components:"fields-select",label:"字体类型",extraProps:{options:Dn("fontFamily",[{label:"宋体",value:'"SimSun","STSong"'},{label:"黑体",value:'"SimHei","STHeiti"'},{label:"楷体",value:'"KaiTi","STKaiti"'},{label:"仿宋",value:'"FangSong","STFangsong"'},{label:"Arial",value:'"Arial", "sans-serif"'},{label:"Comic Sans",value:'"Comic Sans MS"'},{label:"Courier New",value:'"Courier New", monospace'},{label:"Times New Roman",value:'"Times New Roman", serif'}])}},color:{components:"fields-color",label:"字体颜色"},"text-shadow":{components:["a-slider","a-slider"],label:["阴影大小","阴影模糊"],combination:{isCombinationProp:!0,combinationRules:e=>{"none"===e&&(e="0px 0px 0px");const t=e.split(" "),n=[t[0]+" "+t[1],t[2]];return n}},extraProps:[{max:25,step:1,"tip-formatter":e=>`${e}px`},{max:25,step:1,"tip-formatter":e=>`${e}px`},{}],reverseFormat:[e=>"number"===typeof e?`${e}px ${e}px`:Number(e.split("px")[0]),yn("px"),e=>e]}},Sn={width:{components:"a-input-number",label:"宽度",extraProps:{formatter:xn("px").NumberEchoRlues,parser:xn("px").NumberEchoRluesParser,min:375},reverseFormat:yn("px")},height:{components:"a-input-number",label:"高度",extraProps:{formatter:xn("px").NumberEchoRlues,parser:xn("px").NumberEchoRluesParser},reverseFormat:yn("px")},top:{components:"a-input-number",label:"Y轴坐标",extraProps:{max:500,min:1,formatter:xn("px").NumberEchoRlues,parser:xn("px").NumberEchoRluesParser},reverseFormat:yn("px")},left:{components:"a-input-number",label:"X轴坐标",extraProps:{max:500,min:1,formatter:xn("px").NumberEchoRlues,parser:xn("px").NumberEchoRluesParser},reverseFormat:yn("px")},opacity:{components:"a-slider",label:"透明度",extraProps:{max:1,step:.1,"tip-formatter":e=>100*e+"%"},reverseFormat:e=>1-e},"padding-left":{components:"a-slider",label:"内边距左",extraProps:{max:50,step:1,"tip-formatter":e=>`${e}px`},reverseFormat:yn("px")},"padding-right":{components:"a-slider",label:"内边距右",extraProps:{max:50,step:1,"tip-formatter":e=>`${e}px`},reverseFormat:yn("px")},"padding-top":{components:"a-slider",label:"内边距上",extraProps:{max:50,step:1,"tip-formatter":e=>`${e}px`},reverseFormat:yn("px")},"padding-bottom":{components:"a-slider",label:"内边距下",extraProps:{max:50,step:1,"tip-formatter":e=>`${e}px`},reverseFormat:yn("px")},"background-color":{components:"fields-color",label:"背景颜色"},"background-image":{components:"fields-img",label:"背景图片",extraProps:{isNeedDelete:!0}},"border-radius":{components:"a-input-number",label:"边框圆角",extraProps:{max:25,min:0,formatter:xn("px").NumberEchoRlues,parser:xn("px").NumberEchoRluesParser},reverseFormat:yn("px")},"border-color":{components:"fields-color",label:"边框颜色"},"border-style":{components:"fields-select",label:"边框样式",extraProps:{options:[{label:"无",value:"none"},{label:"实线",value:"solid"},{label:"虚线",value:"dashed"},{label:"圆点状",value:"dotted"},{label:"双实线，",value:"double"}]}},"border-width":{components:"a-input-number",label:"边框宽度",extraProps:{max:15,min:0,formatter:xn("px").NumberEchoRlues,parser:xn("px").NumberEchoRluesParser},reverseFormat:yn("px")},"box-shadow":{components:["a-slider","a-slider","fields-color"],label:["阴影大小","阴影模糊","阴影颜色"],combination:{isCombinationProp:!0,combinationRules:e=>{const t=e.split(" "),n=[t[0]+" "+t[1],t[2],t[3]];return n}},extraProps:[{max:25,step:1,"tip-formatter":e=>`${e}px`},{max:25,step:1,"tip-formatter":e=>`${e}px`},{}],reverseFormat:[e=>"number"===typeof e?`${e}px ${e}px`:Number(e.split("px")[0]),yn("px"),e=>e]},scale:{components:"a-input-number",label:"缩放",extraProps:{max:300,min:50,step:10,formatter:xn("%").NumberEchoRlues,parser:xn("%").NumberEchoRluesParser},reverseFormat:e=>e<10?Math.round(100*e):e/100},rotate:{components:"a-input-number",label:"旋转",extraProps:{max:180,min:-180,step:10,formatter:xn("°").NumberEchoRlues,parser:xn("°").NumberEchoRluesParser},reverseFormat:yn("deg")}},_n={...kn,...En,...Sn},Cn=[{name:"文本属性",keys:["textValue","titleValue","font-size","text-align","font-weight","font-family","color","text-shadow"]},{name:"图片属性",keys:["src"]},{name:"形状与位置",keys:["top","left","scale","rotate","padding-left","padding-right","padding-top","padding-bottom"]},{name:"阴影与透明度",keys:["opacity","box-shadow"]},{name:"边框与背景",keys:["border-radius","border-color","border-style","border-width","background-color","background-image"]},{name:"事件功能",keys:["url"]},{name:"全局配置",keys:["width","height","background-color","background-image"]}];function Tn(e){const t=Object.keys(e),n=[];Cn.forEach((e=>{n.push({label:e.name,build:(0,vn.A)(_n,...e.keys)})}));let o=(0,bn.A)(n);return o.forEach((n=>{for(const o in n.build)if(t.includes(o)){const i=t.find((e=>e===o));n.build[o].value=e[i]}else delete n.build[o]})),o=o.filter((e=>0!==Object.keys(e.build).length)),o}function Dn(e,t){return t?.map((t=>({label:(0,o.bF)("span",{style:{[e]:t.value}},[t.label]),value:t.value})))}function On(e,t){let n=null;return function(...o){n&&clearTimeout(n),n=setTimeout((()=>{e.apply(this,o)}),t)}}const Pn={key:0,class:"props-item"},In={class:"item-label"},Rn={class:"item-component"},Ln={class:"item-label"},Xn={class:"item-component"};var Nn=(0,o.pM)({__name:"props-table",props:{propsBuild:{},changeType:{}},setup(e){const t=e,n=(0,f.P)(),r=(e,t)=>t?t(e):e,a=On(((e,o)=>{n.commit("editorStore/updateWidget",{changeKey:o,changeValue:e,changeType:t.changeType}),n.commit("editorStore/setCacheValue","")}),500),l=(e,o,i,r,l)=>{let s;if(n.state.editorStore.cacheValue||n.commit("editorStore/setCacheValue","page"===t.changeType?n.state.editorStore.page.props[o]:n.getters["editorStore/selectedWidget"].props[o]),r){const a="page"===t.changeType?n.state.editorStore.page.props[o]:n.getters["editorStore/selectedWidget"].props[o],c=r(a);c[l]=i(e),s=c.join(" ")}const c=s||(i?i(e):e);n.commit("editorStore/updateWidget",{changeKey:o,changeValue:c,changeType:t.changeType,widgetId:"page"===t.changeType?"":n.state.editorStore.currentComponent,noRecord:!0}),a(c,o,i)};return(e,t)=>((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.propsBuild,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"props-table",key:t},[e?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[e.combination?((0,o.uX)(!0),(0,o.CE)(o.FK,{key:1},(0,o.pI)(e?.components.length,(n=>((0,o.uX)(),(0,o.CE)("div",{class:"props-item props-combiantion-item",key:n},[(0,o.Lk)("div",Ln,(0,i.v_)(e.label[n-1])+":",1),(0,o.Lk)("div",Xn,[((0,o.uX)(),(0,o.Wv)((0,o.$y)(e.components[n-1]),(0,o.v6)({ref_for:!0},e.extraProps&&e.extraProps[n-1]?e.extraProps[n-1]:void 0,{value:r(e.combination.combinationRules(e.value)[n-1],e.reverseFormat[n-1]),"onUpdate:value":o=>l(o,t,e.reverseFormat[n-1],e.combination&&e.combination.combinationRules,n-1)}),null,16,["value","onUpdate:value"]))])])))),128)):((0,o.uX)(),(0,o.CE)("div",Pn,[(0,o.Lk)("div",In,(0,i.v_)(e?.label)+":",1),(0,o.Lk)("div",Rn,[((0,o.uX)(),(0,o.Wv)((0,o.$y)(e.components),(0,o.v6)({ref_for:!0},e.extraProps,(0,o.Tb)(e.extraEvents?e.extraEvents:{}),{value:r(e.value,e.reverseFormat),"onUpdate:value":n=>l(n,t,e.reverseFormat)}),null,16,["value","onUpdate:value"]))])]))],64)):(0,o.Q3)("",!0)])))),128))}});const An=(0,v.A)(Nn,[["__scopeId","data-v-6a2f09a0"]]);var Wn=An,Mn=(0,o.pM)({__name:"props-panel",setup(e){const t=(0,f.P)(),n=(0,r.KR)([0]),i=(0,o.EW)((()=>t.getters["editorStore/selectedWidget"]?Tn(t.getters["editorStore/selectedWidget"].props):[])),a=(0,o.EW)((()=>{const e=i.value.filter((e=>"全局配置"!==e.label));return e||[]}));return(e,t)=>{const i=(0,o.g2)("a-collapse-panel"),r=(0,o.g2)("a-collapse");return(0,o.uX)(),(0,o.Wv)(r,{accordion:"",class:"type-box",activeKey:n.value,"onUpdate:activeKey":t[0]||(t[0]=e=>n.value=e)},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.value,((e,t)=>((0,o.uX)(),(0,o.Wv)(i,{key:t,header:e.label},{default:(0,o.k6)((()=>[(0,o.bF)(Wn,{propsBuild:e.build,changeType:"widgetProps"},null,8,["propsBuild"])])),_:2},1032,["header"])))),128))])),_:1},8,["activeKey"])}}});const Fn=(0,v.A)(Mn,[["__scopeId","data-v-1c5b3768"]]);var Kn=Fn,Yn=(0,o.pM)({__name:"props-section",setup(e){const t=(0,f.P)(),n=(0,o.EW)((()=>t.getters["editorStore/selectedWidget"]));return(e,t)=>{const i=(0,o.g2)("a-empty");return n.value?n.value.isLocked?((0,o.uX)(),(0,o.Wv)(i,{key:1,description:"元素已锁定"})):((0,o.uX)(),(0,o.Wv)(Kn,{key:2})):((0,o.uX)(),(0,o.Wv)(i,{key:0,description:"未选中元素"}))}}});const Vn=Yn;var Bn=Vn,jn=(0,o.pM)({__name:"right-region",setup(e){const t=(0,r.KR)(1),n=(0,f.P)(),i=(0,o.EW)((()=>Tn(n.state.editorStore.page.props)));return(e,n)=>{const r=(0,o.g2)("BgColorsOutlined"),a=(0,o.g2)("a-tab-pane"),l=(0,o.g2)("SettingOutlined"),s=(0,o.g2)("a-tabs");return(0,o.uX)(),(0,o.Wv)(s,{class:"card-tab",activeKey:t.value,"onUpdate:activeKey":n[0]||(n[0]=e=>t.value=e),tabBarGutter:19},{default:(0,o.k6)((()=>[((0,o.uX)(),(0,o.Wv)(a,{key:1},{tab:(0,o.k6)((()=>[(0,o.bF)(r),(0,o.eW)("属性 ")])),default:(0,o.k6)((()=>[(0,o.bF)(Bn)])),_:1})),((0,o.uX)(),(0,o.Wv)(a,{key:2},{tab:(0,o.k6)((()=>[(0,o.bF)(l),(0,o.eW)("全局设置 ")])),default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.value,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t},["全局配置"===e.label?((0,o.uX)(),(0,o.Wv)(Wn,{key:0,propsBuild:e.build,changeType:"page"},null,8,["propsBuild"])):(0,o.Q3)("",!0)])))),128))])),_:1}))])),_:1},8,["activeKey"])}}});const $n=(0,v.A)(jn,[["__scopeId","data-v-eb496024"]]);var Un=$n;function Hn(e,t,n){const o=function(o){const i=o.target;e(o);const r=function(e){t(e,i)};document.addEventListener("mousemove",r);const a=function(e){document.removeEventListener("mousemove",r),n(e,i),document.removeEventListener("mouseup",a)};document.addEventListener("mouseup",a)};return{mousedownEvent:o}}var Qn=n(79669),Gn=n(14250),zn=n(31775),qn="Expected a function";function Zn(e,t,n){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError(qn);return(0,zn.A)(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),(0,Gn.A)(e,t,{leading:o,maxWait:t,trailing:i})}var Jn=Zn;function eo(e){return{all:e=e||new Map,on:function(t,n){var o=e.get(t);o?o.push(n):e.set(t,[n])},off:function(t,n){var o=e.get(t);o&&(n?o.splice(o.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var o=e.get(t);o&&o.slice().map((function(e){e(n)})),(o=e.get("*"))&&o.slice().map((function(e){e(t,n)}))}}}const to=eo();var no=to;const oo=(0,o.Fv)('<div class="point1" data-v-01d90523></div><div class="point2" data-v-01d90523></div><div class="point3" data-v-01d90523></div><div class="point4" data-v-01d90523></div><div class="pointA" data-v-01d90523></div><div class="pointB" data-v-01d90523></div><div class="pointC" data-v-01d90523></div><div class="pointD" data-v-01d90523></div>',8),io=[oo];var ro=(0,o.pM)({__name:"edit-wrapper",props:{widgetId:{},isActive:{type:Boolean}},emits:["selectWidget","updateWidgetProps","getWidget"],setup(e,{emit:t}){const n=e,l=t,s=()=>{l("selectWidget",n.widgetId)},c=()=>{const e=new Map,t=document.querySelector(".middle-box"),n=t.getBoundingClientRect(),o={min:n.left,max:n.left+n.width},i={min:n.top,max:n.top+n.height};return e.set("X",o),e.set("Y",i),e},d=(0,r.Kh)({moveProgress:!1,start:{X:0,Y:0},end:{X:0,Y:0}}),u=(e=!1)=>{const t=d.end.X-d.start.X,n=d.end.Y-d.start.Y;return e?{distanceX:Math.abs(t),distanceY:Math.abs(n)}:{distanceX:t,distanceY:n}},p=Jn((e=>{Qn.Ay.info(e)}),3e3),h=e=>{const t=(...t)=>{l("getWidget",(n=>{try{if(n.isLocked)throw new Error("锁定");const o=t[0];if(c().get("X").min>o.clientX||c().get("X").max<o.clientX||c().get("Y").min>o.clientY||c().get("Y").max<o.clientY)return void p("超出画布范围！");e(...t)}catch(o){p("元素已锁定")}}))};return t},f=function(e){e.preventDefault(),s(),d.start.X=e.clientX,d.start.Y=e.clientY},g=h((function(e,t){d.moveProgress=!0,d.end.X=e.clientX,d.end.Y=e.clientY;const n=u(),o=t.closest(".edit-wrapper");o&&(o.style.left=o.offsetLeft+n.distanceX+"px",o.style.top=o.offsetTop+n.distanceY+"px"),no.emit("moveWidget",{widgetWrapper:o,moveProgress:!0,calculateResult:n}),f(e)})),m=function(e,t){if(!d.moveProgress)return;const n=t.closest(".edit-wrapper");l("updateWidgetProps",{Key:["left","top"],Value:[n.style.left,n.style.top]}),d.moveProgress=!1,no.emit("moveWidget",{widgetWrapper:n,moveProgress:!1})},{mousedownEvent:v}=Hn(f,g,m),b=function(e){e.preventDefault(),s(),d.start.X=e.clientX,d.start.Y=e.clientY,l("getWidget",(e=>{1!==e.props.scale&&l("updateWidgetProps",{Key:"scale",Value:1}),"0deg"!==e.props.rotate&&l("updateWidgetProps",{Key:"rotate",Value:"0deg"})}))},y=h((function(e,t){d.moveProgress=!0,d.end.X=e.clientX,d.end.Y=e.clientY;const{distanceX:n,distanceY:o}=u(),i=t,r=i.closest(".edit-wrapper"),a=i.closest(".edit-wrapper")?.firstElementChild,l=a.getBoundingClientRect();switch(!0){case i.classList.contains("point1"):a.style.width=l.width-n+"px",a.style.height=l.height-o+"px",r.style.top=r.offsetTop+o+"px",r.style.left=r.offsetLeft+n+"px";break;case i.classList.contains("point2"):a.style.width=l.width+n+"px",a.style.height=l.height-o+"px",r.style.top=r.offsetTop+o+"px";break;case i.classList.contains("point3"):a.style.width=l.width-n+"px",a.style.height=l.height+o+"px",r.style.left=r.offsetLeft+n+"px";break;case i.classList.contains("point4"):a.style.width=l.width+n+"px",a.style.height=l.height+o+"px";break;case i.classList.contains("pointA"):a.style.height=l.height-o+"px",r.style.top=r.offsetTop+o+"px";break;case i.classList.contains("pointB"):a.style.width=l.width+n+"px";break;case i.classList.contains("pointC"):a.style.height=l.height+o+"px";break;case i.classList.contains("pointD"):a.style.width=l.width-n+"px",r.style.left=r.offsetLeft+n+"px";break}f(e)})),w=function(e,t){const n=t,o=n.closest(".edit-wrapper"),i=n.closest(".edit-wrapper")?.firstElementChild,r=i.getBoundingClientRect(),{width:a,height:s}=r,{offsetTop:c,offsetLeft:d}=o;switch(!0){case n.classList.contains("point1"):l("updateWidgetProps",{Key:["width","height","top","left"],Value:[a+"px",s+"px",c+"px",d+"px"]});break;case n.classList.contains("point2"):l("updateWidgetProps",{Key:["width","height","top"],Value:[a+"px",s+"px",c+"px"]});break;case n.classList.contains("point3"):l("updateWidgetProps",{Key:["width","height","left"],Value:[a+"px",s+"px",d+"px"]});break;case n.classList.contains("point4"):l("updateWidgetProps",{Key:["width","height"],Value:[a+"px",s+"px"]});break;case n.classList.contains("pointA"):l("updateWidgetProps",{Key:["height","top"],Value:[s+"px",c+"px"]});break;case n.classList.contains("pointB"):l("updateWidgetProps",{Key:"width",Value:a+"px"});break;case n.classList.contains("pointC"):l("updateWidgetProps",{Key:"height",Value:s+"px"});break;case n.classList.contains("pointD"):l("updateWidgetProps",{Key:["width","left"],Value:[a+"px",d+"px"]});break}},{mousedownEvent:x}=Hn(b,y,w),E=(0,r.Kh)({center:{X:0,Y:0},startDegree:0,endDegree:0}),k=(e,t)=>{let n;e.preventDefault(),n=t?t.closest(".edit-wrapper"):e.target.closest(".edit-wrapper");const o=n.getBoundingClientRect();E.center.X=o.left+1*o.width/2,E.center.Y=o.top+1*o.height/2,E.startDegree=Math.atan2(e.clientY-E.center.Y,e.clientX-E.center.X)*(180/Math.PI)},S=(e,t)=>{e.preventDefault(),E.endDegree=Math.atan2(e.clientY-E.center.Y,e.clientX-E.center.X)*(180/Math.PI);const n=t.closest(".edit-wrapper");n.style.rotate=Number(parseFloat(n.style.rotate)+E.endDegree-E.startDegree)+"deg",k(e,t)},_=(e,t)=>{const n=t.closest(".edit-wrapper");l("updateWidgetProps",{Key:"rotate",Value:n.style.rotate})},{mousedownEvent:C}=Hn(k,S,_);return(e,t)=>{const n=(0,o.g2)("IconSvg");return(0,o.uX)(),(0,o.CE)("div",{class:(0,i.C4)(["edit-wrapper",{active:e.isActive}]),onMousedown:t[2]||(t[2]=(...e)=>(0,r.R1)(v)&&(0,r.R1)(v)(...e))},[(0,o.RG)(e.$slots,"default"),(0,o.Lk)("div",{class:"resize-point",onMousedown:t[0]||(t[0]=(0,a.D$)(((...e)=>(0,r.R1)(x)&&(0,r.R1)(x)(...e)),["stop"]))},io,32),(0,o.Lk)("div",{class:"rotatePoint",onMousedown:t[1]||(t[1]=(0,a.D$)(((...e)=>(0,r.R1)(C)&&(0,r.R1)(C)(...e)),["stop"]))},[(0,o.bF)(n,{name:"editor-rotate",fill:"#f4801a"})],32)],34)}}});const ao=(0,v.A)(ro,[["__scopeId","data-v-01d90523"]]);var lo=ao;const so={class:"grid",id:"grid-line"},co=(0,o.Fv)('<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" data-v-11b12fb9><defs data-v-11b12fb9><pattern id="smallGrid" width="7.236328125" height="7.236328125" patternUnits="userSpaceOnUse" data-v-11b12fb9><path d="M 7.236328125 0 L 0 0 0 7.236328125" fill="none" stroke="rgba(207, 207, 207, 0.3)" stroke-width="1" data-v-11b12fb9></path></pattern><pattern id="grid" width="36.181640625" height="36.181640625" patternUnits="userSpaceOnUse" data-v-11b12fb9><rect width="36.181640625" height="36.181640625" fill="url(#smallGrid)" data-v-11b12fb9></rect><path d="M 36.181640625 0 L 0 0 0 36.181640625" fill="none" stroke="rgba(186, 186, 186, 0.5)" stroke-width="1" data-v-11b12fb9></path></pattern></defs><rect width="100%" height="100%" fill="url(#grid)" data-v-11b12fb9></rect></svg>',1),uo=[co];function po(e,t){return(0,o.uX)(),(0,o.CE)("div",so,uo)}const ho={},fo=(0,v.A)(ho,[["render",po],["__scopeId","data-v-11b12fb9"]]);var go=fo;const mo={class:"stickLine"},vo=["id"],bo=12;var yo=(0,o.pM)({__name:"stickLine",setup(e){const t=(0,f.P)(),n=(0,r.Kh)({xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}),l=(0,r.Kh)({xt:0,xc:0,xb:0,yl:0,yc:0,yr:0}),s=(0,r.Kh)({xt:!0,xc:!0,xb:!0,yl:!0,yc:!0,yr:!0}),c=(0,r.Kh)({top:0,left:0}),d=(0,r.KR)({distanceX:0,distanceY:0});no.on("moveWidget",(e=>{if(e.moveProgress){const t=e.widgetWrapper;u(t),p(t),h(),d.value=e.calculateResult}else for(const t in n)n[t]=!1}));const u=e=>{const t=e.closest(".middle-box"),n=t.getBoundingClientRect();c.top=n.top,c.left=n.left},p=e=>{const t=e.getBoundingClientRect();l.xt=e.offsetTop,l.xc=e.offsetTop+1*t.height/2,l.xb=e.offsetTop+t.height,l.yl=e.offsetLeft,l.yc=e.offsetLeft+1*t.width/2,l.yr=e.offsetLeft+t.width},h=()=>{const e=t.state.editorStore.components,n=[];e.forEach((e=>{if(e.id===t.state.editorStore.currentComponent)return;const o=document.getElementById(e.id),i=o.closest(".edit-wrapper"),r=i.getBoundingClientRect(),a={xt:i.offsetTop,xc:i.offsetTop+1*r.height/2,xb:i.offsetTop+r.height,yl:i.offsetLeft,yc:i.offsetLeft+1*r.width/2,yr:i.offsetLeft+r.width};n.push({id:e.id,axisData:a})})),g(n)},g=e=>{for(const t in l){let o=[];e.forEach((e=>{let n;n=t.includes("x")?Object.values(e.axisData).slice(0,3):Object.values(e.axisData).slice(3),o=[...o,...n]}));const i=o.find((e=>!n[t]&&Math.abs(l[t]-e)<=bo));i?(n[t]=!0,m(t,i)):n[t]=!1}},m=(e,n)=>{const o=t.getters["editorStore/selectWidgetDom"],i=o.getBoundingClientRect(),r=o.closest(".edit-wrapper");s[e]&&(e.includes("xt")&&d.value.distanceY<0&&(r.style.top=n+"px",v(e)),e.includes("xb")&&d.value.distanceY>0&&(r.style.top=n-i.height+"px",v(e)),e.includes("yl")&&d.value.distanceX<0&&(r.style.left=n+"px",v(e)),e.includes("yr")&&d.value.distanceY>0&&(r.style.left=n-i.width+"px",v(e)))},v=e=>{s[e]=!1,setTimeout((()=>{s[e]=!0}),800)};return(e,t)=>((0,o.uX)(),(0,o.CE)("div",mo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n,((e,t)=>(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",{key:t,class:(0,i.C4)(["line",t.includes("x")?"xline":"yline"]),id:t,style:(0,i.Tr)(t.includes("x")?{top:l[t]+"px",left:0}:{top:0,left:l[t]+"px"})},null,14,vo)),[[a.aG,e]]))),128))]))}});const wo=(0,v.A)(yo,[["__scopeId","data-v-4d0ac70f"]]);var xo=wo,Eo=(0,o.pM)({__name:"middle-region",setup(e){const t=(0,f.P)(),n=(0,r.KR)(),{ondragover:a,ondrop:s}=g(),c=(0,o.EW)((()=>t.state.editorStore.components)),d=(0,o.EW)((()=>({...t.state.editorStore.page.props,"background-image":t.state.editorStore.page.props["background-image"]?`url(${t.state.editorStore.page.props["background-image"]})`:""}))),u=e=>(0,vn.A)(e,l.Ru),p=e=>{t.commit("editorStore/selectWidget",e)},h=e=>{e(t.getters["editorStore/selectedWidget"])},m=({Key:e,Value:n})=>{t.commit("editorStore/updateWidget",{changeKey:e,changeValue:n,changeType:"widgetProps"})};return(e,l)=>((0,o.uX)(),(0,o.CE)("div",{class:"middle-box",style:(0,i.Tr)(d.value),onDragover:l[0]||(l[0]=(...e)=>(0,r.R1)(a)&&(0,r.R1)(a)(...e)),onDrop:l[1]||(l[1]=(...e)=>(0,r.R1)(s)&&(0,r.R1)(s)(...e))},[(0,r.R1)(t).state.editorStore.openGridLine?((0,o.uX)(),(0,o.Wv)(go,{key:0})):(0,o.Q3)("",!0),(0,o.bF)(xo),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(c.value,((e,a)=>((0,o.uX)(),(0,o.Wv)(lo,{ref_for:!0,ref_key:"EditWrapper",ref:n,key:e.id,widgetId:e.id,onSelectWidget:p,onUpdateWidgetProps:m,onGetWidget:h,isActive:e.id==(0,r.R1)(t).state.editorStore.currentComponent&&!e.isHidden,style:(0,i.Tr)({...u(e.props),"z-index":a})},{default:(0,o.k6)((()=>[e.isHidden?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)((0,o.$y)(e.name),(0,o.v6)({key:0,ref_for:!0},{...e.props,widgetTitle:e.title},{id:e.id}),null,16,["id"]))])),_:2},1032,["widgetId","isActive","style"])))),128))],36))}});const ko=(0,v.A)(Eo,[["__scopeId","data-v-66538630"]]);var So=ko;
/**! 
 * hotkeys-js v3.13.7 
 * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies. 
 * 
 * Copyright (c) 2024 kenny wong <wowohoo@qq.com> 
 * https://github.com/jaywcjlove/hotkeys-js.git 
 * 
 * @website: https://jaywcjlove.github.io/hotkeys-js
 
 * Licensed under the MIT license 
 */
const _o="undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function Co(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent&&e.attachEvent("on".concat(t),n)}function To(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent&&e.detachEvent("on".concat(t),n)}function Do(e,t){const n=t.slice(0,t.length-1);for(let o=0;o<n.length;o++)n[o]=e[n[o].toLowerCase()];return n}function Oo(e){"string"!==typeof e&&(e=""),e=e.replace(/\s/g,"");const t=e.split(",");let n=t.lastIndexOf("");for(;n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}function Po(e,t){const n=e.length>=t.length?e:t,o=e.length>=t.length?t:e;let i=!0;for(let r=0;r<n.length;r++)-1===o.indexOf(n[r])&&(i=!1);return i}const Io={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":_o?173:189,"=":_o?61:187,";":_o?59:186,"'":222,"[":219,"]":221,"\\":220},Ro={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},Lo={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Xo={16:!1,18:!1,17:!1,91:!1},No={};for(let Wi=1;Wi<20;Wi++)Io["f".concat(Wi)]=111+Wi;let Ao=[],Wo=null,Mo="all";const Fo=new Map,Ko=e=>Io[e.toLowerCase()]||Ro[e.toLowerCase()]||e.toUpperCase().charCodeAt(0),Yo=e=>Object.keys(Io).find((t=>Io[t]===e)),Vo=e=>Object.keys(Ro).find((t=>Ro[t]===e));function Bo(e){Mo=e||"all"}function jo(){return Mo||"all"}function $o(){return Ao.slice(0)}function Uo(){return Ao.map((e=>Yo(e)||Vo(e)||String.fromCharCode(e)))}function Ho(){const e=[];return Object.keys(No).forEach((t=>{No[t].forEach((t=>{let{key:n,scope:o,mods:i,shortcut:r}=t;e.push({scope:o,shortcut:r,mods:i,keys:n.split("+").map((e=>Ko(e)))})}))})),e}function Qo(e){const t=e.target||e.srcElement,{tagName:n}=t;let o=!0;const i="INPUT"===n&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);return(t.isContentEditable||(i||"TEXTAREA"===n||"SELECT"===n)&&!t.readOnly)&&(o=!1),o}function Go(e){return"string"===typeof e&&(e=Ko(e)),-1!==Ao.indexOf(e)}function zo(e,t){let n,o;e||(e=jo());for(const i in No)if(Object.prototype.hasOwnProperty.call(No,i))for(n=No[i],o=0;o<n.length;)if(n[o].scope===e){const e=n.splice(o,1);e.forEach((e=>{let{element:t}=e;return ii(t)}))}else o++;jo()===e&&Bo(t||"all")}function qo(e){let t=e.keyCode||e.which||e.charCode;const n=Ao.indexOf(t);if(n>=0&&Ao.splice(n,1),e.key&&"meta"===e.key.toLowerCase()&&Ao.splice(0,Ao.length),93!==t&&224!==t||(t=91),t in Xo){Xo[t]=!1;for(const e in Ro)Ro[e]===t&&(ni[e]=!1)}}function Zo(e){if("undefined"===typeof e)Object.keys(No).forEach((e=>{Array.isArray(No[e])&&No[e].forEach((e=>Jo(e))),delete No[e]})),ii(null);else if(Array.isArray(e))e.forEach((e=>{e.key&&Jo(e)}));else if("object"===typeof e)e.key&&Jo(e);else if("string"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];let[i,r]=n;"function"===typeof i&&(r=i,i=""),Jo({key:e,scope:i,method:r,splitKey:"+"})}}const Jo=e=>{let{key:t,scope:n,method:o,splitKey:i="+"}=e;const r=Oo(t);r.forEach((e=>{const t=e.split(i),r=t.length,a=t[r-1],l="*"===a?"*":Ko(a);if(!No[l])return;n||(n=jo());const s=r>1?Do(Ro,t):[],c=[];No[l]=No[l].filter((e=>{const t=!o||e.method===o,i=t&&e.scope===n&&Po(e.mods,s);return i&&c.push(e.element),!i})),c.forEach((e=>ii(e)))}))};function ei(e,t,n,o){if(t.element!==o)return;let i;if(t.scope===n||"all"===t.scope){i=t.mods.length>0;for(const e in Xo)Object.prototype.hasOwnProperty.call(Xo,e)&&(!Xo[e]&&t.mods.indexOf(+e)>-1||Xo[e]&&-1===t.mods.indexOf(+e))&&(i=!1);(0!==t.mods.length||Xo[16]||Xo[18]||Xo[17]||Xo[91])&&!i&&"*"!==t.shortcut||(t.keys=[],t.keys=t.keys.concat(Ao),!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0)))}}function ti(e,t){const n=No["*"];let o=e.keyCode||e.which||e.charCode;if(!ni.filter.call(this,e))return;if(93!==o&&224!==o||(o=91),-1===Ao.indexOf(o)&&229!==o&&Ao.push(o),["ctrlKey","altKey","shiftKey","metaKey"].forEach((t=>{const n=Lo[t];e[t]&&-1===Ao.indexOf(n)?Ao.push(n):!e[t]&&Ao.indexOf(n)>-1?Ao.splice(Ao.indexOf(n),1):"metaKey"===t&&e[t]&&3===Ao.length&&(e.ctrlKey||e.shiftKey||e.altKey||(Ao=Ao.slice(Ao.indexOf(n))))})),o in Xo){Xo[o]=!0;for(const e in Ro)Ro[e]===o&&(ni[e]=!0);if(!n)return}for(const l in Xo)Object.prototype.hasOwnProperty.call(Xo,l)&&(Xo[l]=e[Lo[l]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===Ao.indexOf(17)&&Ao.push(17),-1===Ao.indexOf(18)&&Ao.push(18),Xo[17]=!0,Xo[18]=!0);const i=jo();if(n)for(let l=0;l<n.length;l++)n[l].scope===i&&("keydown"===e.type&&n[l].keydown||"keyup"===e.type&&n[l].keyup)&&ei(e,n[l],i,t);if(!(o in No))return;const r=No[o],a=r.length;for(let l=0;l<a;l++)if(("keydown"===e.type&&r[l].keydown||"keyup"===e.type&&r[l].keyup)&&r[l].key){const n=r[l],{splitKey:o}=n,a=n.key.split(o),s=[];for(let e=0;e<a.length;e++)s.push(Ko(a[e]));s.sort().join("")===Ao.sort().join("")&&ei(e,n,i,t)}}function ni(e,t,n){Ao=[];const o=Oo(e);let i=[],r="all",a=document,l=0,s=!1,c=!0,d="+",u=!1,p=!1;for(void 0===n&&"function"===typeof t&&(n=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(r=t.scope),t.element&&(a=t.element),t.keyup&&(s=t.keyup),void 0!==t.keydown&&(c=t.keydown),void 0!==t.capture&&(u=t.capture),"string"===typeof t.splitKey&&(d=t.splitKey),!0===t.single&&(p=!0)),"string"===typeof t&&(r=t),p&&Zo(e,r);l<o.length;l++)e=o[l].split(d),i=[],e.length>1&&(i=Do(Ro,e)),e=e[e.length-1],e="*"===e?"*":Ko(e),e in No||(No[e]=[]),No[e].push({keyup:s,keydown:c,scope:r,mods:i,shortcut:o[l],method:n,key:o[l],splitKey:d,element:a});if("undefined"!==typeof a&&window){if(!Fo.has(a)){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;return ti(e,a)},t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;ti(e,a),qo(e)};Fo.set(a,{keydownListener:e,keyupListenr:t,capture:u}),Co(a,"keydown",e,u),Co(a,"keyup",t,u)}if(!Wo){const e=()=>{Ao=[]};Wo={listener:e,capture:u},Co(window,"focus",e,u)}}}function oi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(No).forEach((n=>{const o=No[n].filter((n=>n.scope===t&&n.shortcut===e));o.forEach((e=>{e&&e.method&&e.method()}))}))}function ii(e){const t=Object.values(No).flat(),n=t.findIndex((t=>{let{element:n}=t;return n===e}));if(n<0){const{keydownListener:t,keyupListenr:n,capture:o}=Fo.get(e)||{};t&&n&&(To(e,"keyup",n,o),To(e,"keydown",t,o),Fo.delete(e))}if(t.length<=0||Fo.size<=0){const e=Object.keys(Fo);if(e.forEach((e=>{const{keydownListener:t,keyupListenr:n,capture:o}=Fo.get(e)||{};t&&n&&(To(e,"keyup",n,o),To(e,"keydown",t,o),Fo.delete(e))})),Fo.clear(),Object.keys(No).forEach((e=>delete No[e])),Wo){const{listener:e,capture:t}=Wo;To(window,"focus",e,t),Wo=null}}}const ri={getPressedKeyString:Uo,setScope:Bo,getScope:jo,deleteScope:zo,getPressedKeyCodes:$o,getAllKeyCodes:Ho,isPressed:Go,filter:Qo,trigger:oi,unbind:Zo,keyMap:Io,modifier:Ro,modifierMap:Lo};for(const Wi in ri)Object.prototype.hasOwnProperty.call(ri,Wi)&&(ni[Wi]=ri[Wi]);if("undefined"!==typeof window){const e=window.hotkeys;ni.noConflict=t=>(t&&window.hotkeys===ni&&(window.hotkeys=e),ni),window.hotkeys=ni}function ai(e,t,n){(0,o.sV)((()=>{ni(e,{...n},t)})),(0,o.hi)((()=>{ni.unbind(e)}))}const li=e=>{const t=(t,n)=>{t.preventDefault(),e(t,n)};return t};function si(){const e=(0,f.P)(),t=(0,o.EW)((()=>e.getters["editorStore/selectWidgetDom"])),n=(0,o.EW)((()=>e.state.editorStore.currentComponent));let i=1;const r=On((n=>{const o=t.value?.closest(".edit-wrapper");e.commit("editorStore/updateWidget",{changeKey:n,changeValue:o.style[n]})}),500);ai("Delete,Backspace",li((()=>{e.commit("editorStore/deleteWidget",{})}))),ai("Esc",li((()=>{e.commit("editorStore/selectWidget","")}))),ai("Ctrl+C",li((()=>{n.value&&e.commit("editorStore/copyComponent")}))),ai("Ctrl+V",li((()=>{e.commit("editorStore/pasteComponent")}))),ai("up,down,left,right,shift+up,shift+down,shift+left,shift+right",li(((e,n)=>{if("keydown"===e.type){const e=t.value?.closest(".edit-wrapper"),o=n?.key.includes("up")||n?.key.includes("down"),a=n?.key.includes("shift")?i++:i,l=o?"top":"left",s=n?.key.includes("right")||n?.key.includes("down")?a:-a,c=o?"offsetTop":"offsetLeft";e.style[l]=e[c]+s+"px",r(l)}"keyup"===e.type&&(i=1)})),{keyup:!0}),ai("Ctrl+Z",li((()=>{e.dispatch("editorStore/undo")}))),ai("Ctrl+Shift+Z",li((()=>{e.dispatch("editorStore/redo")})))}function ci(e,t){let n=!1;return(e.classList.contains(t)||null!==e.closest(t))&&(n=!0),n}var di=n(59716);function ui(e,t){const n=document.createElement("div"),i=(0,o.h)(di["default"],{menuList:e});(0,a.XX)(i,n),document.body.appendChild(n);const r=function(e){if(e.preventDefault(),ci(e.target,t)){i.component.setupState.showMenu=!0;const t=document.querySelector(".menu-list");t.style.top=e.clientY+"px",t.style.left=e.clientX+"px"}};return(0,o.sV)((()=>{document.addEventListener("contextmenu",r)})),(0,o.hi)((()=>{document.body.removeChild(n),document.removeEventListener("contextmenu",r)})),{}}var pi=n(99397),hi=n.p+"img/phone-head.452e9992.png",fi=(n(46023),n(61142),n(35138),n(69893),n(90018),n(61143),n(14269),n(69845),n(64696),n(49571),!1);function gi(e){return!!(0,r.o5)()&&((0,r.jr)(e),!0)}function mi(e){return"function"===typeof e?e():(0,r.R1)(e)}const vi="undefined"!==typeof window&&"undefined"!==typeof document,bi=("undefined"!==typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope),e=>null!=e),yi=(Object.prototype.toString,()=>{});function wi(e){const t=Object.create(null);return n=>{const o=t[n];return o||(t[n]=e(n))}}const xi=/\B([A-Z])/g,Ei=(wi((e=>e.replace(xi,"-$1").toLowerCase())),/-(\w)/g);wi((e=>e.replace(Ei,((e,t)=>t?t.toUpperCase():""))));function ki(e){var t;const n=mi(e);return null!=(t=null==n?void 0:n.$el)?t:n}const Si=vi?window:void 0;vi&&window.document,vi&&window.navigator,vi&&window.location;function _i(){const e=(0,r.KR)(!1),t=(0,o.nI)();return t&&(0,o.sV)((()=>{e.value=!0}),fi?void 0:t),e}function Ci(e){const t=_i();return(0,o.EW)((()=>(t.value,Boolean(e()))))}"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self&&self;function Ti(e,t,n={}){const{root:i,rootMargin:a="0px",threshold:l=.1,window:s=Si,immediate:c=!0}=n,d=Ci((()=>s&&"IntersectionObserver"in s)),u=(0,o.EW)((()=>{const t=mi(e);return(Array.isArray(t)?t:[t]).map(ki).filter(bi)}));let p=yi;const h=(0,r.KR)(c),f=d.value?(0,o.wB)((()=>[u.value,ki(i),h.value]),(([e,n])=>{if(p(),!h.value)return;if(!e.length)return;const o=new IntersectionObserver(t,{root:ki(n),rootMargin:a,threshold:l});e.forEach((e=>e&&o.observe(e))),p=()=>{o.disconnect(),p=yi}}),{immediate:c,flush:"post"}):yi,g=()=>{p(),f(),h.value=!1};return gi(g),{isSupported:d,isActive:h,pause(){p(),h.value=!1},resume(){h.value=!0},stop:g}}function Di(e,t={}){const{window:n=Si,scrollTarget:o,threshold:i=0}=t,a=(0,r.KR)(!1);return Ti(e,(e=>{let t=a.value,n=0;for(const o of e)o.time>=n&&(n=o.time,t=o.isIntersecting);a.value=t}),{root:o,window:n,threshold:i}),a}Number.POSITIVE_INFINITY;const Oi=e=>((0,o.Qi)("data-v-4b46f0c8"),e=e(),(0,o.jt)(),e),Pi={class:"shadow-card left-col relative"},Ii=["src"],Ri=Oi((()=>(0,o.Lk)("div",{class:"iphone-tip"},null,-1))),Li={class:"shadow-card right-col relative"};var Xi=(0,o.pM)({__name:"index",setup(e){si();const t=(0,f.P)(),n=(0,pi.lq)(),l=(0,r.KR)(!1),s=(0,o.EW)((()=>t.state.editorStore.page.props.width)),c=(0,r.KR)([{name:"拷贝图层",tip:"⌘C / Ctrl+C",fn:()=>{t.commit("editorStore/copyComponent")}},{name:"粘贴图层",tip:"⌘V / Ctrl+V",fn:()=>{t.commit("editorStore/pasteComponent")}},{name:"删除图层",tip:"Backspace / Delete",fn:()=>{t.commit("editorStore/deleteWidget",{})}},{name:"取消选中",tip:"ESC",fn:()=>{t.commit("editorStore/selectWidget","")}}]);ui(c.value,".edit-wrapper");const d=(0,r.KR)(null),u=Di(d),p=(0,r.KR)(!1),h=()=>{const e=document.querySelector(".middle-col");e&&(e.scrollTop=0)};(0,o.wB)(u,(e=>{p.value=!e}));const g=e=>{const n=e.target;n.closest(".left-col")||n.closest(".right-col")||n.closest(".edit-wrapper")||t.state.editorStore.currentComponent&&t.commit("editorStore/selectWidget","")};return(0,o.sV)((()=>{l.value=!0;const e=t.dispatch("editorStore/readWork",n.params.id);e.then((()=>{})).catch((()=>{Qn.Ay.error("读取作品信息出错，请重新刷新页面!")})).finally((()=>{l.value=!1}))})),(e,n)=>{const c=(0,o.g2)("a-col"),u=(0,o.g2)("ArrowUpOutlined"),f=(0,o.g2)("a-spin"),m=(0,o.g2)("a-row");return(0,o.uX)(),(0,o.Wv)(m,{style:{height:"100%"},onClick:g},{default:(0,o.k6)((()=>[(0,o.bF)(c,{span:7,lg:6,xl:6,xxl:4},{default:(0,o.k6)((()=>[(0,o.Lk)("div",Pi,[(0,o.bF)(mn)])])),_:1}),(0,o.bF)(c,{span:0,lg:0,xl:0,xxl:2}),(0,o.bF)(c,{class:"middle-col hidden-scrollbar",span:10,lg:12,xl:12,xxl:12},{default:(0,o.k6)((()=>[(0,o.bF)(f,{spinning:l.value,size:"large",tip:"读取中"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",{class:"middle-region-wrapper",ref:"middleRegionWrapper",style:(0,i.Tr)({width:s.value?s.value:"470px",transform:`scale(${(0,r.R1)(t).state.editorStore.canvasRate})`})},[(0,o.Lk)("div",{ref_key:"iphoneHeadRef",ref:d,class:"iphone-head"},[s.value&&parseInt(s.value)<768?((0,o.uX)(),(0,o.CE)("img",{key:0,src:(0,r.R1)(hi),alt:""},null,8,Ii)):(0,o.Q3)("",!0)],512),Ri,(0,o.bo)((0,o.Lk)("div",{class:"scroll-top",onClick:h},[(0,o.bF)(u)],512),[[a.aG,p.value]]),(0,o.bF)(So)],4)])),_:1},8,["spinning"])])),_:1}),(0,o.bF)(c,{span:0,lg:0,xl:0,xxl:1}),(0,o.bF)(c,{span:7,lg:6,xl:6,xxl:5},{default:(0,o.k6)((()=>[(0,o.Lk)("div",Li,[(0,o.bF)(Un)])])),_:1})])),_:1})}}});const Ni=(0,v.A)(Xi,[["__scopeId","data-v-4b46f0c8"]]);var Ai=Ni}}]);
//# sourceMappingURL=79.b18e0666.js.map