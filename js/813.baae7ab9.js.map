{"version":3,"file":"js/813.baae7ab9.js","mappings":"uPAYA,GAA4BA,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,QACRC,KAAAA,CAAMC,GCUR,MAAMC,GAASC,EAAAA,EAAAA,MACTC,GAAWC,EAAAA,EAAAA,MACXC,GAAeD,EAAAA,EAAAA,MAEfE,EAAyBC,IACpBC,EAAAA,EAAAA,GAAKD,EAAiBE,EAAAA,IAG3BC,EAAcC,UAChB,MAAMC,QAAeC,EAAAA,EAAAA,IAAcC,OAAOb,EAAOc,OAAOC,KACxDb,EAASc,MAAQL,EAAOM,KAAKC,QAE7Bd,EAAaY,MAAQG,SAASjB,EAASc,OAAOI,MAAMC,MAAgB,EAIlEC,GAAYC,EAAAA,EAAAA,KAAS,KACvB,MAAM,MAAEH,GAAUlB,EAASc,MACrBQ,EAAYC,EAAUL,GAE5B,MAAO,IACAI,EACH,mBAAoBA,EAAU,oBACxB,OAAOA,EAAU,uBACjB,GAEK,IAIbC,EAAaC,IACf,IAAK,MAAMC,KAAOD,EACd,GAA6B,kBAAlBA,EAASC,IAAqBD,EAASC,GAAKC,SAAS,OAA8C,IAArCF,EAASC,GAAKE,MAAM,MAAMC,OAAc,CAE7G,MAAMC,EAAc3B,EAAaY,MAC3BgB,GAAanB,OAAOa,EAASC,GAAKM,QAAQ,KAAM,KAAOF,EAAe,KAAKG,QAAQ,GAAK,KAC9FR,EAASC,GAAOK,C,CAGxB,OAAON,CAAQ,EDDnB,OCIAS,EAAAA,EAAAA,KAAU,KACN1B,GAAa,IDLV,CAAC2B,EAAUC,IACRnC,EAASc,QACZsB,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CACxCZ,IAAK,EACLa,MAAO,YACPC,OAAOC,EAAAA,EAAAA,IAAgBpB,EAAUN,QAChC,GACAsB,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoBI,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY1C,EAASc,OAAO6B,YAAY,CAACC,EAAMC,MAC7FT,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CZ,IAAKmB,EAAK/B,GACV0B,OAAOC,EAAAA,EAAAA,IAAgB,IAAKrC,EAAsBoB,EAAUqB,EAAK1B,QAAS,UAAW2B,KACpF,GACAT,EAAAA,EAAAA,OAAcU,EAAAA,EAAAA,KAAaC,EAAAA,EAAAA,IAAyBH,EAAKI,OAAOC,EAAAA,EAAAA,IAAY,CAAEC,SAAS,GAAQ,IAAK3B,EAAUqB,EAAK1B,OAAQiC,YAAaP,EAAKQ,OAAS,CACrJvC,GAAI+B,EAAK/B,KACP,KAAM,GAAI,CAAC,SACd,MACD,OACH,KACHwC,EAAAA,EAAAA,IAAoB,IAAI,EAE9B,I,WE3EA,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://question-star/./src/views/lego-works/previewWork/index.vue?7dc2","webpack://question-star/./src/views/lego-works/previewWork/index.vue","webpack://question-star/./src/views/lego-works/previewWork/index.vue?86f1"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveDynamicComponent as _resolveDynamicComponent, mergeProps as _mergeProps, createBlock as _createBlock, normalizeStyle as _normalizeStyle, createCommentVNode as _createCommentVNode } from \"vue\"\n\nimport { useRoute } from 'vue-router'\nimport { onMounted, ref, computed, StyleValue } from 'vue'\nimport { reqDetailWork } from '@/api/works/workItem'\nimport { ContextData } from '@/type/api/work'\nimport type { AllWidgetProps } from 'question-star-bricks'\nimport { parentWrapperStyleKeys } from 'question-star-bricks'\nimport { pick } from 'lodash-es'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\nconst $route = useRoute()\nconst workData = ref<ContextData>()\nconst defaultWidth = ref()\n\nconst getParentWrapperStyle = (widgetsOwnProps: Partial<AllWidgetProps>) => {\n    return pick(widgetsOwnProps, parentWrapperStyleKeys) as any\n}\n\nconst getWorkDate = async () => {\n    const result = await reqDetailWork(Number($route.params.id))\n    workData.value = result.data.content\n    // 存储默认宽度\n    defaultWidth.value = parseInt(workData.value?.props.width as string)\n}\n\n// 页面属性\nconst pageStyle = computed(() => {\n    const { props } = workData.value!\n    const propsTemp = processPx(props)\n\n    return {\n        ...propsTemp,\n        'background-image': propsTemp['background-image']\n            ? `url(${propsTemp['background-image']})`\n            : ''\n        // 修复url(undefined)的请求404问题\n    } as StyleValue\n})\n\n// 加工成vw单位\nconst processPx = (styleObj: object) => {\n    for (const key in styleObj) {\n        if (typeof styleObj[key] === 'string' && styleObj[key].includes('px') && styleObj[key].split('px').length === 2) {\n            // 找出比例\n            const designWidth = defaultWidth.value\n            const newValue = ((Number(styleObj[key].replace('px', '')) / designWidth) * 100).toFixed(2) + 'vw'\n            styleObj[key] = newValue\n        }\n    }\n    return styleObj\n}\n\nonMounted(() => {\n    getWorkDate()\n})\n\nreturn (_ctx: any,_cache: any) => {\n  return (workData.value)\n    ? (_openBlock(), _createElementBlock(\"div\", {\n        key: 0,\n        class: \"container\",\n        style: _normalizeStyle(pageStyle.value)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(workData.value?.components, (item, index) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: item.id,\n            style: _normalizeStyle({ ...getParentWrapperStyle(processPx(item.props)), 'z-index': index })\n          }, [\n            (_openBlock(), _createBlock(_resolveDynamicComponent(item.name), _mergeProps({ ref_for: true }, { ...processPx(item.props), widgetTitle: item.title }, {\n              id: item.id\n            }), null, 16, [\"id\"]))\n          ], 4))\n        }), 128))\n      ], 4))\n    : _createCommentVNode(\"\", true)\n}\n}\n\n})","<template>\n    <div class=\"container\" v-if=\"workData\" :style=\"pageStyle\">\n        <div v-for=\"(item, index) in workData?.components\" :key=\"item.id\"\n            :style=\"{ ...getParentWrapperStyle(processPx(item.props)), 'z-index': index }\">\n            <component :is=\"item.name\" v-bind=\"{ ...processPx(item.props), widgetTitle: item.title }\" :id=\"item.id\">\n            </component>\n        </div>\n\n    </div>\n    <!-- <div class=\"box\">我会是vw单位</div> -->\n    <!-- <pre>\n         {{ workData?.components }}\n        </pre> -->\n</template>\n\n<script setup lang='ts'>\nimport { useRoute } from 'vue-router'\nimport { onMounted, ref, computed, StyleValue } from 'vue'\nimport { reqDetailWork } from '@/api/works/workItem'\nimport { ContextData } from '@/type/api/work'\nimport type { AllWidgetProps } from 'question-star-bricks'\nimport { parentWrapperStyleKeys } from 'question-star-bricks'\nimport { pick } from 'lodash-es'\n\nconst $route = useRoute()\nconst workData = ref<ContextData>()\nconst defaultWidth = ref()\n\nconst getParentWrapperStyle = (widgetsOwnProps: Partial<AllWidgetProps>) => {\n    return pick(widgetsOwnProps, parentWrapperStyleKeys) as any\n}\n\nconst getWorkDate = async () => {\n    const result = await reqDetailWork(Number($route.params.id))\n    workData.value = result.data.content\n    // 存储默认宽度\n    defaultWidth.value = parseInt(workData.value?.props.width as string)\n}\n\n// 页面属性\nconst pageStyle = computed(() => {\n    const { props } = workData.value!\n    const propsTemp = processPx(props)\n\n    return {\n        ...propsTemp,\n        'background-image': propsTemp['background-image']\n            ? `url(${propsTemp['background-image']})`\n            : ''\n        // 修复url(undefined)的请求404问题\n    } as StyleValue\n})\n\n// 加工成vw单位\nconst processPx = (styleObj: object) => {\n    for (const key in styleObj) {\n        if (typeof styleObj[key] === 'string' && styleObj[key].includes('px') && styleObj[key].split('px').length === 2) {\n            // 找出比例\n            const designWidth = defaultWidth.value\n            const newValue = ((Number(styleObj[key].replace('px', '')) / designWidth) * 100).toFixed(2) + 'vw'\n            styleObj[key] = newValue\n        }\n    }\n    return styleObj\n}\n\nonMounted(() => {\n    getWorkDate()\n})\n</script>\n\n<style>\nhtml,\nbody,\n#app {\n    height: auto !important;\n}\n</style>\n<style scoped lang='scss'>\n.container {\n    position: relative;\n    background-size: cover;\n}\n\n.box {\n    border: 1px solid red;\n    width: 300px;\n    height: 667px;\n}\n</style>\n","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=64341b64&lang=css\"\nimport \"./index.vue?vue&type=style&index=1&id=64341b64&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.4.38_vue@3.4.38_webpack@5.91.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-64341b64\"]])\n\nexport default __exports__"],"names":["_defineComponent","__name","setup","__props","$route","useRoute","workData","ref","defaultWidth","getParentWrapperStyle","widgetsOwnProps","pick","parentWrapperStyleKeys","getWorkDate","async","result","reqDetailWork","Number","params","id","value","data","content","parseInt","props","width","pageStyle","computed","propsTemp","processPx","styleObj","key","includes","split","length","designWidth","newValue","replace","toFixed","onMounted","_ctx","_cache","_openBlock","_createElementBlock","class","style","_normalizeStyle","_Fragment","_renderList","components","item","index","_createBlock","_resolveDynamicComponent","name","_mergeProps","ref_for","widgetTitle","title","_createCommentVNode","__exports__"],"sourceRoot":""}